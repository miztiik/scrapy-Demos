{"Answers": {"usr-1": ["Hi, I have set subnet-b573d2ed as default subnet in VPC VPC vpc-f3c80e97. Please check and feel free to reach out to us should you need more assistance. Regards, Souza S"], "usr-2": ["Thanks"]}, "Question": "Hi AWS-Team, My account Id: 782601848424 Unfortunately, I deleted my default two subnets within my default VPC (VPC ID: vpc-f3c80e97) in US West (N. California). I create one subnet. If this one correct, please set as default. Subnet ID: subnet-b573d2ed Thanks Edited by: polas on Jan 21, 2017 9:48 AM", "Title": "Deleted default subnet of default VPC.", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=247507&tstart=25"}{"Answers": {"usr-1": ["Hi, I'm sorry to hear you deleted your default vpc in oregon region. I've already recreated the vpc for you. Please check on your console and you should be seeing it there now. Cheers Javier C#"]}, "Question": "Hi , Can you pl. restore by default VPC in US West (Oregon) Region. As of now no internet connection is there to that server. Neither I can do apt-get update .. Here is the error - root@ip-72-31-156-31:/home/frapadmin# apt-get update 0\\% http://Connecting to ap-southeast-1.ec2.archive.ubuntu.com (54.179.105.228) [Conn.... and it stays there. Cheers Shibs", "Title": "Restore Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231290&tstart=125"}{"Answers": {"usr-1": ["Hi Luis, I've re-created your default VPC in Dublin/EU-WEST-1 Region. Cheers"], "usr-2": ["Thank you very much."]}, "Question": "Hi, I deleted my default VPC in EU Ireland region by mistake (thought i could create it again later). Could you please recreate it. Thanks in advance for all your help.", "Title": "Recreate default VPC in EU Ireland", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231551&tstart=125"}{"Answers": {"usr-1": ["Hello, A default VPC has been recreated in US West (Oregon) region for your account. Thank you, Jay"], "usr-2": ["Hi, thanks for restoring my default VPC. I am having now a problem when I'm trying to create a new database instance. Cannot create a publicly accessible DBInstance. The specified VPC has no internet gateway attached.Update the VPC and then try again (Service: AmazonRDS; Status Code: 400; Error Code: InvalidVPCNetworkStateFault; Request ID: fd4260c4-1bcd-11e6-88e0-2977a2d13130) I have an Internet Gateway, subnets and route tables associated with my VPC. Thank you !"]}, "Question": "Hi , Can you pls restore by default VPC in US West (Oregon) Region. Thank you", "Title": "Restore Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231328&tstart=125"}{"Answers": {"usr-1": ["Hello, We have recreated Default VPCs in the requested regions for your account. Have a great day! Andrea S."]}, "Question": "region=us-east-1, region=us-west-1, region=us-west-2 I'm testing Aws. Checked vpc in the regions, I found that generate costs. Deleted. I tried to recreate but is not too sure. You could create new VPCs default?", "Title": "Deleted my default VPC - Help", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231936&tstart=125"}{"Answers": {"usr-1": ["Hello, We have re-created your default VPC on us-west-2 region. Could you please check it on VPC console?"], "usr-2": ["Hi Jerry, Thank you so much, default VPC is available and its working fine. Regards, RAJ"]}, "Question": "Hi, I'm new to aws, by mistake I have deleted my default VPC, I'm facing problems related VPC to deploy my webapp on elasticbeanstalk. Could you please Restore/Recreate deleted default VPC . Edited by: rajdesh02 on May 22, 2016 9:14 AM", "Title": "Restore/Recreate my deleted default VPC - free Tier Users", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232060&tstart=125"}{"Answers": {"usr-1": ["Hello, We have recreated your default VPC on us-east-1 region. Could you please check it on VPC console?"], "usr-2": ["The VPC has been created thank you so much -a"]}, "Question": "I've foolishly and accidentally deleted my N. Virginia US-EAST-1 default vpc. Can someone from AWS Support pls restore it? thx Edited by: buxur on May 22, 2016 11:41 AM", "Title": "Pls Restore My N. Virginia US-EAST-1 Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232076&tstart=125"}{"Answers": {"usr-1": ["The two setups you are describing are indeed very similar. If you optimize for cost, I would say that \"Solution 1\" is a perfectly fine option. \"Solution 2\" would in my opinion be the better option if you value proper architecture. Some may be concerned about security. For example, it can be debated whether a private instance should have a public IP address, even if the security group doesn't allow inbound traffic. Anyway, your analysis is correct. In this particular scenario (and probably many others), you can save some money by being a little creative."]}, "Question": "Hello, If I understand correctly, it seems that using private IPs + VPC NAT is more expensive than just assigning public IPs to all my instances (as public-IPs do not incur extra charge while NAT gateway does, at least $35/month). Is that a correct assessment? this means there's an incentive to waste precious public-IPs for most common scenarios instead of using more private IPs. To give a concrete example: Let's say I want to have 1 instance as SSH gateway, accessible from the internet, and 10 'private' instances, which I don't want to be in-bound accessible (but still want them to be out-bound accessbile, e.g. to download software updates). Solution 1: Create 1 instance with public IP (52.X.X.X) + private IP (172.31.X.X) + Security group that allows inbound tcp port 22 and full access to 172.31.0.0/16; Create 10 instances with Public IP (doesn't matter which one) + private IPs (172.31.X.X) + Security group that allows full outbound but only 172.31.0.0/16 in-bound. Solution 2: Create 1 instance with Public IP + private IP + Security group that allows inbound tcp port 22 and full access to 172.31.0.0/16; Create 10 instances with only private IP; Create VPC NAT Gateway + Elastic IP for the 10 'private' instances. It seems like the outcome of both solutions is very similar (only one instances allows in-bound TCP port 22 connections, and can connect from it to the other private instances), but solution 2 will cost much more (due to NAT Gateway + Elastic IP). am I missing something ? thanks, - gordon", "Title": "Cost of VPC+NAT vs Public IPs ?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=234460&tstart=100"}{"Answers": {"usr-1": ["If you want to provide direct Internet access, you need a VPC route table entry pointing 0.0.0.0/0 to the Internet Gateway, plus a public IP address for that EC2 instance. Another option is to set up a NAT instance (EC2 instance running a NAT image) or NAT gateway (managed gateway provisioned through the VPC Management Console). With a NAT instance/gateway, you point 0.0.0.0/0 to that entity, which in turn will have an Internet connection. The EC2 instance that is going to access the Internet does not need a public IP address in that case."], "usr-2": ["Tks for the help. I already did both and nothing happened. I've this on the route table configuration: Dest: 0.0.0.0/0 Target: igw-91XXXXX (internet gateway) Status: Active Propagated: No I think I should had a rule in the network ACL to allow EC2Config to send the info (outbound rule) but I don't know which port or protocol it uses. I'm obtaining the following error in EC2Config logs. 2016-07-03T21:16:01.277Z: Error Unable to upload log events to the log stream DEVDB in the log group 'Servers': A WebException with status ConnectFailure was thrown. : 2016-07-03T21:16:01.277Z: Warning Failed to UploadLogs to CloudWatch Log Service for log group Servers and log stream DEVDB. 2016-07-03T21:18:20.366Z: Error Unable to upload log events to the log stream DEVDB in the log group 'Servers': A WebException with status ConnectFailure was thrown. : 2016-07-03T21:18:20.366Z: Warning Failed to UploadLogs to CloudWatch Log Service for log group Servers and log stream DEVDB. 2016-07-03T21:29:02.097Z: Error Unable to upload log events to the log stream DEVDB in the log group 'Servers': A WebException with status ConnectFailure was thrown. : 2016-07-03T21:29:02.097Z: Warning Failed to UploadLogs to CloudWatch Log Service for log group Servers and log stream DEVDB. 2016-07-03T21:31:21.217Z: Error Unable to upload log events to the log stream DEVDB in the log group 'Servers': A WebException with status ConnectFailure was thrown. : 2016-07-03T21:31:21.217Z: Warning Failed to UploadLogs to CloudWatch Log Service for log group Servers and log stream DEVDB. 2016-07-03T21:33:47.432Z: Error Unable to upload log events to the log stream DEVDB in the log group 'Servers': A WebException with status ConnectFailure was thrown. : 2016-07-03T21:33:47.432Z: Warning Failed to UploadLogs to CloudWatch Log Service for log group Servers and log stream DEVDB."], "usr-3": ["otacon wrote: Dest: 0.0.0.0/0 Target: igw-91XXXXX (internet gateway) Status: Active Propagated: No Looks good! And the Windows instance has a public IP address (dynamic IP or Elastic IP) assigned, right? I think I should had a rule in the network ACL to allow EC2Config to send the info (outbound rule) but I don't know which port or protocol it uses. It's likely HTTPS on port 443 (ACL: 443 outbound, ephemeral ports inbound). But the Network ACL comes with a very relaxed configuration by default, which is what I would recommend while troubleshooting if possible. Then it's always possible to lock things down."]}, "Question": "Hi guys, Hi have a db machine that isn't reachable from the outside world less you're the front-end connected to the db. It's on a private subnet. Meanwhile, I want to configure EC2Config service to send logs from the machine to AWS Cloudwatch. The issue is that I don't know how to configure a rule in the subnet to allow that. I've already associated an internet gateway but when I remote desktop the machine it displays no internet connection on windows. I'm a rookie on this. Can you help me? Thanks", "Title": "How to give access to a \"private\" machine to send logs through EC2ConfigSrv", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=234605&tstart=100"}{"Answers": {"usr-1": ["Any help would be appreciated!"], "usr-2": ["A public subnet is a subnet where the associated route table has a default route pointing towards an Internet Gateway. A private subnet on the other hand has an associated route table containing no default route or one pointing to a NAT instance/gateway. So it's the actual route table configuration that makes it a \"public subnet\" or \"private subnet\" For some reason, AWS doesn't seem to offer this instance type in that particular availability zone. It means that you need to set up subnets in one of the zones recommended in the message."], "usr-3": ["Ah, thank you for answering my question!"]}, "Question": "Hello everone, I'm learning about NAT instance so i decided to create a NAT instance following this article http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_NAT_Instance.html There was some points i'm not really understand: For example: 'On the Configure Instance Details page, select your private subnet from the Subnet list, and do not assign a public IP address to your instance. ' So what is exactly the private subnet? At first, Create two subnets (see Creating a Subnet) Attach an Internet gateway to the VPC (see Attaching an Internet Gateway) Create a custom route table that sends traffic destined outside the VPC to the Internet gateway, and then associate it with one subnet, making it a public subnet (see Creating a Custom Route Table) one of them has been used as public subnet, did that mean the other one is private subnet? If so, when i was creating private instance using 'the other subnet', i got this error: Launch Failed Your requested instance type (t2.micro) is not supported in your requested Availability Zone (ap-northeast-1b). Please retry your request by not specifying an Availability Zone or choosing ap-northeast-1a, ap-northeast-1c. Please elaborate on this! Thanks in advanced! Edited by: khoi-thinh on Jul 6, 2016 12:43 AM Edited by: khoi-thinh on Jul 6, 2016 1:05 AM", "Title": "Where's the private subnet according to AWS NAT instance's article?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=234792&tstart=100"}{"Answers": {"usr-1": ["Hi, It is possible to have Subnet A - Internet goes out via IG Subnet B - Internet goes out via NAT gateway To do this each subnet must have its own routing table. Create a new routing table and associate it to the subnet B. You will need to create a new public subnet and new routing table. The routing table's default route should point to a new internet gateway. You should then launch a new NAT gateway and place it in the new subnet. When this is done you can change subnet B routing table to point the default route to the new NAT gateway. Please refer to this link for more information on working with routing tables: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Route_Tables.html Regards, Souza S"]}, "Question": "ok, so I have 1 VPC and 3 subnets. I have 1 Internet Gateway (IG) that does the private server outbound traffic. My 3rd subnet is grown and taking up a huge part of that IG and I am seeing latency and timeouts with remote connections it makes. So I want to say subnet 3 use a NAT gateway as opposed to the existing IG. So in the VPC console, I created a NAT gateway. Under Subnets, I select that 3rd, goto route table, click edit and under change to I see 3 options; 1. main - IGW (this is the internet gateway) 2. main - NAT 3. NAT The 1st has the IG address for the gateway. 2 and 3 have different route table ID's, but the routes are identical, has the whole VPC 192.168.0.0/16 local and then 0.0.0.0/0 and the address is eni-3ee1b71e / i-a02e291e which is the IG. So I clicked EDIT, went to the 0.0.0.0/0 cleared the target and 2 items appeared, the IG and the NAT. So I selected the NAT, went to that machine and it get's NO internet. The NAT has a public IP and the Network ACL says allow all in / out. I move it back to the IG and I get internet fine (but using the same IG box I dont want to use). So, I dont want to build a whole new VPC as there are things already running, so is there a way to simply say; VPC - Subnet A - Internet goes out via IG - Subnet B - Internet goes out via NAT gateway. All the above looks like a lot but rather simple, and figured it would work that way. Thanks", "Title": "Moving subnet to use a different outbound method", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=235031&tstart=100"}{"Answers": {"usr-1": ["Hello, Thanks for using the AWS Developer Forums! As requested, I have created a new Default VPC in your EU-WEST-1 region. Best regards, Joel K. Amazon Web Services"]}, "Question": "Could you please restore my default vpc in Ireland (eu-west-1). Thankyou.", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=235043&tstart=100"}{"Answers": {"usr-1": ["Hello, Your account is still EC2-Classic in this region. To have a default VPC, we'll need to convert you to strictly EC2-VPC. To do this you'll need to delete all EC2-Classic resources in that region you may have and then confirm with us (In this forum post or over PM) that you want to convert to EC2-VPC. You can read more on the differences between EC2-Classic and EC2-VPC here: http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-supported-platforms.html And here: http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-vpc.html#differences-ec2-classic-vpc Regards, Nick"], "usr-2": ["Hi Nick, Thanks for the answer, I'm sorry for the late reply. I have deleted all my EC2 classic resources. Please go ahead and convert my account in eu-west-1 to EC2-VPC only. Thanks a lot. BR, Andrea."], "usr-3": ["Hi Andrea, I have submitted the request to convert EU-WEST-1 (Ireland) to EC2-VPC with a Default VPC. We will update this thread when the request has been fulfilled. Best regards, Joel K. Amazon Web Services"], "usr-4": ["Update: The request has been fulfilled and I can confirm that EU-WEST-1 (Ireland) is now EC2-VPC with a Default VPC. Anything else we can do please let us know. Best regards, Joel K. Amazon Web Services"]}, "Question": "Hello, Could you please create the default VPC and public subnets for my account in the eu-west-1 region? Please feel free to delete any existing VPC/SN if there's any address clash. Thanks in advance.", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231172&tstart=125"}{"Answers": {"usr-1": ["Done! Edited by: khoi-thinh on Jul 11, 2016 6:21 PM"], "usr-2": ["Done!"]}, "Question": "Hello, I'd like to delete 2 of these following Security Group but couldn't do it. rds-securitygroup and web-dmz. Here's the what AWS told me: This security group is an attribute of one or more network interfaces, and cannot be deleted until you delete the network interface, or change its attributes. Click here to view network interfaces that have this security group as an attribute I clicked the link and saw 2 network interface ID eni-15eccd5e eni-15eccd5e Then i tried to detach them but it said i don't have permission. Error deleting network interface eni-a8b74cf5: You do not have permission to access the specified resource. Can you please help me to delete it? Edited by: khoi-thinh on Jul 11, 2016 6:12 PM", "Title": "I couldn't delete Security Group due to permission", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=234979&tstart=75"}{"Answers": {"usr-1": ["Hello, Regions with default VPC can not have Ec2 classic access. Once the default VPC is set, it can not be reverted and Ec2 classic can no longer be accessed. If you wish to make other regions have default VPC let us know. Note that the requirement is that you should not have any resources running in EC2 classic in that region in order to set the default VPC. Regards, Umair A."], "usr-2": ["Hi Umair! Thank you for the response. VPC-only regions such as Frankfurt are OK and I understand. My question was for those regions that are not VPC-only. For example US Northeast. For those regions, I do not have a default VPC and was asking if that is the way it is supposed to be and if I need to have AWS reset my account for those regions as well. What say you? JP"], "usr-3": ["Hello JP, For the regions that support both EC2-Classic and VPC, if you used them before we enabled default VPCs, we did not create one, while we created a default VPC in each region in which you hadn't created any AWS resources. You can find additional information at the following link: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/default-vpc.html#default-vpc-basics Have a nice day! Andrea S."], "usr-4": ["Thank you for the link. I had reached out to account support because I lost my default VPC across all regions as per -- \"If you delete your default VPC and need a new one, you can contact AWS Support to create a new default VPC in that region for you. You cannot mark an existing VPC as a default VPC.\" Please advice on how to proceed to get a default VPC in regions which support both. My understanding is that AWS can create them and set them to default. Thanks! Edited by: Amazon Customer on Jul 17, 2016 5:28 AM"], "usr-5": ["Hi, I can see that you have Default VPC on regions where it supports. But the default network on Regions ap-northeast-1,ap-southeast-1, eu-west-1, us-west-1 and us-east-1 for your account - 8XXXXXXXXX29 is EC2-Classic. Thats why you do not have a Default VPC in those regions. The simplest way to get a default VPC is to create a new account in a region that is enabled for default VPCs. If you want to create a Default VPC on your existing account, you need to make your account (for region us-east-1) 'VPC Only'. We can only enable an existing account for a default VPC if you have no EC2-Classic resources for that account in that region. Additionally, you must terminate all non-VPC provisioned Elastic Load Balancers, Amazon RDS, Amazon ElastiCache, and Amazon Redshift resources in that region. After your account has been configured for a default VPC, all future resource launches, including instances launched via Auto Scaling, will be placed in your default VPC. You will not able able to use the EC2 Classic network any more on the region. You can read more about this on our documentation here. To request your existing account be setup with a Default VPC, contact AWS Support. We will review your request and your existing AWS services and EC2-Classic presence to determine if you are eligible for a default VPC."], "usr-6": ["Thank you!"], "usr-7": ["Hello, I have now completed a series of internal trainings and cleaned up instances potentially running under EC2 classic. My account is old and I would like to avoid closing it and re-create a new VPC-only account unless you guys recommend this. Is it possible, based on the advice given previously in this thread, to remove all EC2 classic options and provide default VPCs across all regions (including e.g. California & Ireland which have none now)? The idea is to bring this account to a state comparable with recently created accounts... Does this make sense? TIA JP"], "usr-8": ["I decided to close my old account and created a new one. Edited by: Amazon Customer on Aug 12, 2016 1:00 AM"], "usr-9": ["resolved myself by deleting my old account which supported EC2 classic..."]}, "Question": "Hello, I recently reached out to AWS Support to reset my account as I had removed my default VPC. I now have a default VPC in those regions that do not offer EC2-Classic e.g. Frankfurt. Other regions have no default VPC. Should I make a separate request for that? Or is that the correct state? I know the change restored my ability to launch EMR instances in a EC2Classic/VPC region... TIA JP", "Title": "default VPC missing", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=235143&tstart=75"}{"Answers": {"usr-1": ["Hi All Redone the VPC and made minor changes on my PAN boxes. The traffic is now flowing as expected. Will wait and watch for a day before adding closing remarks to this case"], "usr-2": ["Closing this case as all issues are sorted"], "usr-3": ["Closed"]}, "Question": "Hi All This is the second VPC / VPN I have set with our on-premise PAN to support larger subnet (Private / Public). The first one was set 18 months back and is working without issues. I am currently testing with one public subnet in this VPC , however , the new one is NOT sending any traffic to an EC2 instance though its IPSEC tunnels status is up. Details are below: Working VPC ID: vpc-d3f809bb Not working VPC ID: vpc-f2abb397 VPN ID: vpn-8a4fcba3 State: available Virtual Private Gateway: vgw-d3763181 Customer Gateway: cgw-b72066e5 (203.56.176.3) Type: ipsec.1 Routing: Static All required routing tables are added correctly to their IGW and VGW. Could you assist to check where the issue is. I am also following this case with PAN support to see if i overlooked something regards ITR Singapore Edited by: ITR-Singapore on Jul 15, 2016 8:48 PM Edited by: ITR-Singapore on Jul 15, 2016 8:49 PM", "Title": "New VPC Unable to ping EC2 instances", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=235471&tstart=75"}{"Answers": {"usr-1": ["Hello, We have recreated your default VPC on us-west-2. Please let us know if you need any assistance."], "usr-2": ["Thanks"]}, "Question": "Hi, I have accidentally deleted my US West Oregon region default VPC. I was hoping you would be able to recreate my default VPC for me. Thanks, Souvik", "Title": "I have deleted my default vpc", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=235467&tstart=75"}{"Answers": {"usr-1": ["Hello, Thank you for reaching out to us. The default VPC in sa-east-1 region has been restored. Regards, Masudur Rahaman Sayem"]}, "Question": "Hello, I've deleted my default VPC, can you recreate my east default VPC? Thank's!", "Title": "Default VPC Deleted", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231784&tstart=125"}{"Answers": {"usr-1": ["Issue was with client side configuration. The guides provided are all the setup required on the AWS side."]}, "Question": "Hi, I followed this: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_VPN.html#SetUpVPNConnections and: http://docs.aws.amazon.com/AmazonVPC/latest/NetworkAdminGuide/Cisco_ASA.html guides to setup a VPN between my VPC and a private network. The tunnel is up, but I can not ping from my EC2 instance inside the VPC to the remote location even after adding it as a static route. Does the instance itself require any configuration to understand how to route the request? Ping: root@ip-10-0-0-10:/home/ubuntu# ping 134.177.251.220 PING 134.177.251.220 (134.177.251.220) 56(84) bytes of data. ^C 134.177.251.220 ping statistics --- 6 packets transmitted, 0 received, 100\\% packet loss, time 5039ms TraceRoute: root@ip-10-0-0-10:/home/ubuntu# traceroute 134.177.251.220 traceroute to 134.177.251.220 (134.177.251.220), 30 hops max, 60 byte packets 1 - - - 2 - - - ... 29 - - - 30 - - - Route table: Destination Target Status Propagated 10.0.0.0/16 local Active No 0.0.0.0/0 igw-76565d13 Active No 134.177.251.220/32 vgw-cd3fd1a4 Active Yes What could I be missing?", "Title": "VPN Tunnel Up but cannot ping from EC2 instance to remote server", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=235548&tstart=75"}{"Answers": {"usr-1": ["Hello, thanks for posting. I've recreated your default VPC in eu-central-1. It has a VPC ID of vpc-xxxxe005. I did notice that you named another VPC \"Default VPC\", and this may cause some confusion, but your AWS default VPC is the one specified above. Best regards, David"], "usr-2": ["Many thanks! Yeah, I labeled another VPC as default (just a note to myself when I choose it manually) ... Best regards! DJ ~~~"]}, "Question": "Hello, I have accidentally deleted my EU (Frankfurt) region default VPC. I was hoping you would be able to recreate my default VPC for me (or set the existing one: vpc-b70698de as default). Many thanks, George", "Title": "I've deleted my default VPC by mistake", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=235781&tstart=75"}{"Answers": {"usr-1": ["Hello, thank you for posting. Generally in AWS, you restrict security at two levels -Instance level (Security Groups) -Subnet level (ACLs) In your case, if you want to only allow outbound traffic on TCP 443, I would suggest either -Applying a Security Group to your private instances which only allows egress 443 to 0.0.0.0/0 -Apply ACLs to your private instances' subnets which only allow egress 443 to 0.0.0.0/0 I don't recommend blocking this traffic with ACLs on the NAT Gateway's subnet, because it's often difficult to get the correct egress/ingress rules when you're dealing with a NAT. You can also read more here: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Security.html Best regards, David"], "usr-2": ["Thanks. Using a SG for egress traffic would indeed be a working solution, but our security dept don't like it. They want me to have actual application proxies which must be used by all instances which need to connect to the internet. These application proxies are the only instances which are allowed to directly connect to the internet. Thanks again for your comment and advice."]}, "Question": "Hi there. I'm struggling with the problem how to restrict access to a NAT GW. For OS updates all hosts in my VPC must be able to perform outbound HTTP(S) connections towards the internet. I can't seem to be able to enforce that only HTTP(S) protocols can be used (versus unlimited access to the Internet), as you can't assign a Security Group to a NAT Gateway. I tried to do so for the Elastic Network Interface that was automatically created and assigned to my NAT Gateway, but I get a permission violation (both via the console and the CLI tool): You do not have permission to access the specified resource. The cleanest way would be to launch an EC2 instance into the public subnet that owns the NAT GW, set up a Squid proxy on that VM, protect the VM with a Security Group, and then have all internal machines use this proxy. This will definitely work, but I would like to spare myself the extra two instances (I would have to duplicate the above so that I have a redundant path in a different Availability Zone, with an Elastic Load Balancer in front of the two instances). Any advice, please? Kind regards, Ralf Edited by: ralfbergs on Jul 28, 2016 9:46 PM", "Title": "How to restrict access to NAT GW?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=236311&tstart=75"}{"Answers": {"usr-1": ["This tutorial helped a lot: https://www.youtube.com/watch?v=iaRoF2kqkbM"]}, "Question": "Hello, I'm just trying out AWS and are following the PHP Sample App tutorial ( https://aws.amazon.com/getting-started/tutorials/launch-an-app/ ). When I get to the page about VPC Configuration I get the following message: 'No VPC was found. Create a new VPC or uncheck 'Create this environment inside a VPC' on the Additional Resources page.' I've read up a bit on VPC but I'm not sure what to choose and how to go forward. The plans are to first try out the PHP Sample App to get everything running and then begin development of another project (PHP/MySQL app) on this platform. What are the best practices you would recommend for this? Best, Phaeaco", "Title": "No VPC was found...", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=236351&tstart=75"}{"Answers": {"usr-1": ["Hello, Thank you for reaching out to us. The default VPC of your account in us-east-1 region has been restored. Regards Masudur Rahaman Sayem"]}, "Question": "Hi, I have deleted my default VPC, can you recreate my east default VPC please? Edited by: cclos on May 17, 2016 4:03 PM - added region", "Title": "Deleted default vpc", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231791&tstart=125"}{"Answers": {"usr-1": ["Hello, We have recreated your default VPC on eu-central-1 region. Please let us know if you need any assistance."], "usr-2": ["Thanks Jerry"]}, "Question": "Hi there Can someone please reinstate the default VPC in eu-central (frankfurt) for my account? Thank you J", "Title": "Please recreate eu-central default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=236442&tstart=75"}{"Answers": {}, "Question": "Hi, Im not sure i configured it the right way, i will be glad if someone can assist me on this one. The following commands: set security zones security-zone trust interfaces st0.8 set security zones security-zone untrust host-inbound-traffic system-services ike set security zones security-zone trust host-inbound-traffic protocols bgp Im not sure about the zones. Im working with multiple zones, and not using the default 2 mentioned on this example, as my untrust zone i have Untrust (so i assume i can use it?) and for trust i work with ~50 zones, so can i create a new zone for that purpose? lets say AWS-VPN? but if so, how should i configure my policy? from 'any other trust zone' to zone 'AWS-VPN'? In addition should i add static route? aws ip-range to st0.8 and st0.9??? Edited by: voval on Aug 1, 2016 12:23 AM", "Title": "Juniper SRX 550 VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=236418&tstart=75"}{"Answers": {"usr-1": ["Solved it myself. I forgot to add a static route to the tunneled network in the VPC routing table."]}, "Question": "Hello, I have created a VPN into one of my VPC subnets. The tunnel itself is up and my firewall shows traffic being encrypted into the tunnel. However I cannot reach any of the instances in the VPC or subnet and my firewall does not show any return traffic coming out of the tunnel. The instances within the subnet can reach each other and their virtual gateway, but also not through the tunnel. One of the instances within the subnet is: i-0bf80a09b204ce75c Any hints what could be wrong here? Thanks!", "Title": "VPN established but cannot reach any instances", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=236438&tstart=75"}{"Answers": {"usr-1": ["set security ike gateway xxxxx no-nat-traversal where xxxxx is the name of the ike gateway"]}, "Question": "I've been trying to setup a VPN between a Juniper SRX300 and a VPC for more than a week with absolutely zero signs of success. I have attached all the relevant information, hopefully somebody can help me make sense of it. root@HSRX300> show security ike security-associations Index State Initiator cookie Responder cookie Mode Remote Address 139471 DOWN aa7dfa9d3a2f1ec7 0000000000000000 Main 52.87.109.64 139472 DOWN 7ece629a6b35cb88 0000000000000000 Main 52.206.202.16 root@HSRX300> show security ipsec security-associations Total active tunnels: 0", "Title": "ipsec VPN Juniper without bgp, zero success", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=236900&tstart=75"}{"Answers": {"usr-1": ["Hello Tomas, Default VPC has been re-created. Regards, Umair A."], "usr-2": ["Thank You very much! BR, Tomas"]}, "Question": "Hello, Could you please recreate the default VPC in eu-central? Thanks, Tomas", "Title": "Request to recreate default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=236888&tstart=75"}{"Answers": {"usr-1": ["was acl - sorted!"], "usr-2": ["Hi there, Good to hear that you have fixed your issue. I will just update this thread for future references. Cisco ASA just supports Policy Based VPN, so the customer can face this problem with multiple SAs. ======================== When you create a VPN using Cisco ASA, you need to specify all traffic that needs to be routed to the VPC. Traffic will be encrypted and transmitted through the tunnel to the VPC. This is done using an ACL that is applied in your ASA configuration. If the customer has multiple subnets on his on-premise datacenter, the solution is to use the \"any\" as source, specifying a single access-list entry for accessing the VPC subnet range. For example: Your VPC subnet is: 192.168.0.0/16 Your Local subnets are: 10.0.0.0/8 / 172.31.0.0/16 Your ACL should be: access-list acl-amzn extended permit ip any4 192.168.0.0/16 This will create only 1 Security Association in your VPN with AWS and it will work properly. You can filter the traffic that will pass through the VPN using the VPN filter in Cisco ASA: The VPN Filter will restrict traffic that is permitted through the tunnels. By default, all traffic is denied. The first entry provides an example to include traffic between your VPC Address space and your office. You may need to run 'clear crypto isakmp sa', in order for the filter to take effect. For example access-list aws_vpn_filter extended permit ip 10.0.0.0 255.0.0.0 192.168.0.0 255.255.0.0 access-list aws_vpn_filter extended permit ip 172.31.0.0 255.255.0.0 192.168.0.0 255.255.0.0 access-list aws_vpn_filter extended deny ip any any Apply the VPN Filter: group-policy vpn_filter internal group-policy vpn_filter attributes vpn-filter value aws_vpn_filter tunnel-group <AWS_PEER_1> general-attributes default-group-policy vpn_filter tunnel-group <AWS_PEER_2> general-attributes default-group-policy vpn_filter ======================== Hope this is useful. Plinio @ AWS"]}, "Question": "Hi guys, I have a VPC setup on the 10.200.0.0/16 ranges with subnets On my ASA side I have multiple vlans - 10.129.0.0/16 and 192.168.0.0/24 amongst others. I have created routes to both destination networks on the AWS VPN side of things and the routes propagate On the ASA side I have added the 2 x local vlans to the encryption domain on the crypto map (10.129.0.0/16 and 192.168.0.0/24) The VPN establishes and if I keep the setup to just one local vlan ( 10.129.0.0/16 OR 192.168.0.0/24 ) each network is pingable from either side. However, if I add the second vlan the first vlan cant reach the AWS VPC. Oddly, if I just restart the VPN SA it will flip flop on me with pingability going from one to the other on every restart. The simple fact that I can reach my VPC tells me that AWS setup should be correct. However, the setup I have used is the standard and have done this many time to other IPSEC peers. What am I missing? Cheers!", "Title": "Cisco ASA to VPN Flip Flop!", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=237112&tstart=75"}{"Answers": {"usr-1": ["Hello, This is not a supported configuration as detailed here: http://docs.aws.amazon.com/AmazonVPC/latest/PeeringGuide/invalid-peering-configurations.html#edge-to-edge-vgw A good way to think of this is that any inbound traffic to a VPC (Whether across VPN, VPC Peer, or Direct Connect) must have a destination address of an IP within the VPC CIDR. If the destination address of the packet does not match something within the VPC it's dropped before even entering the VPC. For what you're attempting to implement, destination and source NAT'ing would need to be used on an instance within VPC1. Regards, Nick"], "usr-2": ["Thanks for the answer Nick. Much appreciated."]}, "Question": "Hi, I'm currently working on an experimental architecture whereby i join my on premise network to multiple VPC's. To save on costs I only want to set up a single VPN concentrator. My idea is to set up the concentrator in 'VPC1' then peer that VPC to 'VPC2'. I have successfully configured the peering/routing so that communication to hosts is possible across both VPC's 1 and 2. I have also successfully configured my VPN concentrator and routes in VPC1 so hosts from my on-premise network can can reach hosts in VPC1 and visa versa. Moreover, hosts from my on-prem network can also reach hosts in VPC2 via the VPN and peered link but hosts from VPC2 cannot reach hosts on the on premise network via the peer link (though I am performing a SNAT as the on-prem traffic traverses the firewall). I'm at a loss as to why VPC2 hosts cannot communicate with my on premise network. Looking at logs of my firewall/vpn concentrator in VPC1 it looks as though traffic isnt even getting that far, so there must be something incorrect in my VPC routing but I cant figure out what. Routing tables for both VPC's are as below... VPC1 local > local 0.0.0.0 > IGW On-Prem > VPN concentrator ENI VPC2 > PCX1 VPC2 local > local 0.0.0.0 > IGW OnPrem > PCX1 VPC1 > PCX1 My only option at this point seems to be to DNAT my on-prem network to a subnet in VPC1, but that will be annoying. I dont see why my above no-NAT idea shouldn't work. Any ideas? EDIT: Security Groups are all allowing the relevant traffic Edited by: shopkeeper56 on Aug 16, 2016 9:19 AM", "Title": "VPC Peering Routing Issue", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=237367&tstart=75"}{"Answers": {"usr-1": ["Hello Snafu, Could you please provide the IP address for which the PTR record needs to be removed? I wasn't able to lookup the IP address using the ID. You can also PM me the IP address. I will try to remove it. Thanks, Anup"]}, "Question": "Hi, as I can not create a tech-support ticket: Could you please remove the PTR from eipalloc-f35ab69a in order to allow me to release the IP. As the EC2 Team created the PTR Record while removing the Email limit, I can not remove the Record myself. Cheers, snafu", "Title": "@AWS: Please remove PTR Record from eipalloc-f35ab69a", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=237400&tstart=75"}{"Answers": {"usr-1": ["Hello khoi-thinh, If the request for the VPC peering connection has failed, the failed VPC peering connection remains visible to the requester for 2 hours. Here's the AWS document reference that explains the VPC peering lifecycle - http://docs.amazonaws.cn/en_us/AmazonVPC/latest/PeeringGuide/vpc-peering-overview.html#vpc-peering-lifecycle Have a nice day! Regards, Nimita"], "usr-2": ["Thank you very much."]}, "Question": "Hello everyone, I got failed when creating Peering connection due to overlap CIDR of 2 VPC. Now when i choose: Action, the option 'Delete Peering Connection' was hidden. So i wasn't be able to delete it. What should i do now?", "Title": "How to delete VPC Peering connection?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=237520&tstart=75"}{"Answers": {"usr-1": ["Hello, A default VPC has been re-created for your account in eu-west-1 region. Regards, Jay"], "usr-2": ["Thank you very much ! Best regards, JC"]}, "Question": "Hello, Could you please recreate the default VPC in eu-west-1? Thanks, JC", "Title": "Request to recreate default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=238235&tstart=75"}{"Answers": {"usr-1": ["Hello, By default we limit how much email traffic an EC2 instance can generate. You can review this here and submit a form to alleviate this restraint here: https://aws.amazon.com/forms/ec2-email-limit-rdns-request?catalog=true&isauthcode=true Regards, Nick"]}, "Question": "On my VPC vpc-813f63e4 there is an ec2 public istance that randomly drop smtp connection to external server. I've tryed to test connenction also via telenet but i've got a connection time out. I see connection REJECT on vpc flow log: 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36220 25 6 1 60 1472479755 1472479814 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36201 25 6 7 420 1472479755 1472479874 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36220 25 6 51 62543 1472479755 1472479814 ACCEPT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36232 25 6 7 420 1472479815 1472479934 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36252 25 6 7 420 1472479815 1472479934 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36282 25 6 4 240 1472479875 1472479934 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36263 25 6 6 360 1472479875 1472479934 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36282 25 6 3 180 1472479935 1472479994 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36263 25 6 1 60 1472479935 1472479994 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36295 25 6 5 300 1472479935 1472479994 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36314 25 6 7 420 1472479935 1472480054 REJECT OK 2 155109729141 eni-9b2f8be3 10.14.0.122 93.xx.xx.xx2 36295 25 6 47 57122 1472479935 1472479994 ACCEPT OK 2 155109729141 eni-9b2f8be3 93.xx.xx.xx2 10.14.0.122 25 36295 6 20 1393 1472479935 1472479994 ACCEPT OK Why is it happining? I haven't any outbound restrictions: no security groups outbound and no restriction Networc ACL are set Thank you, Massimo", "Title": "External SMTP connection dropped on VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=238277&tstart=75"}{"Answers": {"usr-1": ["Issues with our own routing table."]}, "Question": "Scenario: We have two offices. OfficeA has blocks like 10.0.{1..8}.0, 10.100.0.0. and OfficeB, uses 10.143.0.0 block. While setting up tunnel for officeA I have used 10.0.0.0/8 CIDR completely in order to summarize and I can ping across the VPC and officeA. But, I believe, this is creating issues with OfficeB. the route table for VPC has the separate entry for block 10.143.0.0 block but I am unable to ping across. However, the tunnel is up which specifies there is definitely something wrong with the routing. Below are the tracepath's for both the offices from my VPC machine: officeA: root@awsswarm1 ~ # tracepath 10.0.1.182 1?: LOCALHOST pmtu 9001 1: 172.30.0.1 0.066ms pmtu 1500 1: 169.254.3.1 0.839ms pmtu 1438 1: 169.254.21.210 154.066ms asymm 2 2: xx.xx.xx.xx 170.126ms 3: ext-app82 154.372ms reached officeB: root@awsswarm1 ~ # tracepath 10.143.1.126 1?: LOCALHOST pmtu 9001 1: 172.30.0.1 0.079ms pmtu 1500 1: 169.254.3.1 0.854ms pmtu 1438 1: no reply As per routing basics, If I describe a more specific route, it should route to officeB's tunnel, but it does not even reach 169.254.21.210 ( which I believe would be the virtual gateway) We can make 2 blocks of 10.0.0.0/9 which will serve the purpose but this will disrupt the ongoing traffic between officeA and VPC which at the moment we can't. Edited by: mayurbhatiapersoniva on Sep 1, 2016 4:42 AM", "Title": "Tunnel established but unable to pass the traffic.", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=238423&tstart=75"}{"Answers": {"usr-1": ["Hi, I am not able to see the multiple entries in my test account. Could you please check again and let us know? Also could you please let us know the Region on which you are seeing this? Regards, Jayakrishnan L."], "usr-2": ["Hi Jayakrishnan, Please note that the entries are showing correctly on the VPC service page. The problem seems to be on the EC2 service page. Please follow the below steps to reproduce the issue: 1. Land on EC2 service page. 2. Select NETWORK & SECURITY -> Security Groups on the left navigation pane. 3. Select either a default security group or create a new security group and select it. 4. Select Actions -> Edit inbound rules or Edit outbound rules or open the Inbound or Outbound rules tab in the properties pane and click Edit 5. In the popup Edit inbound rules / Edit outbound rules modal make the following selections to view the duplicate entries: a. Type -> Custom ICMP Rule b. Protocol -> Destination Unreachable c. Expand the drop down list under Port Range d. You should now see the duplicate entries at positions 11 and 12. I am logged into N. Virginia region (us-east-1). I am able to see the same in Oregon (us-west-2) region also. I guess it will be this way in other regions too if the same display metadata is used everywhere. Hope it clarifies for further investigations. Thanks & Regards, Sourav Paul"], "usr-3": ["Hello, Thank you for those steps to reproduce this. I can confirm I see the same behaviour. I will open an internal query with engineering to see what they say. Someone will post back here when we know more. Richard"], "usr-4": ["Hello, Thank you again for reporting this. We've identified the issue on our side and will be correcting it in our next deployment. Happy Friday Richard"]}, "Question": "Hello Forum Members, I am new to AWS and have setup a Free Tier account to play around with the different AWS services. I am amazed by the breadth and depth of the platform and am super excited to join the vibrant ecosystem. One strange observation I had while trying out the different VPC configurations was that when I am configuring the rules for a VPC Security Group and select Type : 'Custom ICMP Rule' and Protocol : 'Destination Unreachable' I can see 2 duplicate display labels under Port Range with content 'network administratively prohibited' at list positions 11 and 12 . When I inspect the drop down select element in the browser I can see that the code values are 9 and 10 respectively which translate to 'The destination network is administratively prohibited.' and 'The destination host is administratively prohibited.' according to this Wikipedia section: https://en.wikipedia.org/wiki/ICMP_Destination_Unreachable#Destination_unreachable Is this a bug in the UI or am I missing something? Please clarify. Thanks and Regards Sourav Paul", "Title": "Security Group rule for ICMP Destination Unreachable shows duplicate labels", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=237255&tstart=75"}{"Answers": {"usr-1": ["Hi Robert, VPC Peering at the moment only works within the same region, so the only way to get this working for you will be VPN access. However is not quite complicated to achieve, you can check this third party tutorial for it https://www.comparitech.com/blog/vpn-privacy/how-to-make-your-own-free-vpn-using-amazon-web-services/ Or, the quick start guide from the OpenVPN official site. https://docs.openvpn.net/how-to-tutorialsguides/virtual-platforms/amazon-web-services-ec2-tiered-appliance-quick-start-guide/ Hope this may help you to solve your issue. Please let me know if you have any doubt or concern Cheers Javier C#"]}, "Question": "Hi guys, all of our instances are running in the region EU (Frankfurt), but now we want to play a little bit with Amazon Workspaces. Unfortunately Workspaces are not available in Frankfurt, so we must start here in EU(Ireland). To use Workspaces correctly we need an Amazon AD-Connector. So how can i connect the AD-Connector in Irleand to our AD instance in Frankfurt. VPN is one solution, but is there something simpler? I tried VPC Peering but it doesn't work...", "Title": "connection between region Ireland and Frankfurt", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=238907&tstart=75"}{"Answers": {"usr-1": ["Found exactly what I needed on the Palo Alto forums: https://live.paloaltonetworks.com/t5/General-Topics/PA-500-VPN-with-Amazon-VPC/m-p/21119/highlight/true#M15421 Advertising default route In the VR go to the BGP tab ---> Export rules select peer group ---> add prefix 0.0.0.0/0 --->set action allow then goto redistribution rules --->add 0.0.0.0/0 and enable. commit verify - show routing protocols bgp rib-out"]}, "Question": "I'm having issues with my VPN connection. I've configured the AWS side as well as my side (Palo Alto PA-3060, PANOS 7.1) using the exported config doc with BGP and the tunnel is up, however it looks like AWS is not receiving any routes from me. I've tried advertising different prefixes as well as just the default route with no luck. The config doc said PANOS 4+, I wonder if there are some additional settings in the newer versions of PANOS that might need to be configured? Any help would be greatly appreciated.", "Title": "AWS Not Receiving BGP Routes from Palo Alto", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=238972&tstart=75"}{"Answers": {"usr-1": ["Hi Herv\u00e9, I've created a new Default VPC in the eu-west-1 region: vpc-e9f37b8d Take care and have a great weekend! Kind regards, Chris"]}, "Question": "Hi I have deleted my default VPC in Dublin. Can you please restore it ? Thanks Herv\u00e9", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=239012&tstart=75"}{"Answers": {}, "Question": "Edit: My question was answered in reddit first, here . We have three Linux EC2 instances on the same subnet with I1: MAC1/IP1, I2: MAC2/IP2, I3: MAC3/IP3, and the default Gateway GW/MACGW/IPGW (x.x.x.1): 1/ If we send an ICMP echo packet from I1 with destination=MAC2 and IP=IP3, the packet is lost. Neither I2 nor I3 receive the packet. 2/ If we send an ICMP echo packet from I1 with destination=MACGW, and IP=IP3. The packet is received by I3 BUT with source = MAC1. I3 answers with an echo reply and I1 receives it. Do you know what is going on? Edited by: Sebastian W on Sep 9, 2016 8:50 PM", "Title": "VPC issues with crafted network packets", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=239028&tstart=75"}{"Answers": {"usr-1": ["Hello, While looking up your account id, I picked up that you have an active Default VPC in the mentioned region. VPC ID ending with '5aa'. If you still have any problems with your Default VPC, please let us know."], "usr-2": ["A nice guy from Billing Support helped me out! Thank you guys a lot!"]}, "Question": "I accidentally deleted my default VPC in us-east-1 region. Can someone from AWS Support please restore it? Thanks!", "Title": "Please Restore my Default VPC in us-east-1", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=239314&tstart=50"}{"Answers": {"usr-1": ["Any help would be greatly appreciated!"], "usr-2": ["Hello, I assume you're talking about the following documentation: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Route_Tables.html What that portion is trying to describe is that the \"Main\" route table will be used by subnets unless another route table is specifically configured for those subnets. You can think of the \"Main\" route table as the default route table, which will be used until another route table is specifically assigned. As far as defining the terms implicit and explicit, in this context implicit means that it's using that route table because it's the \"Main\" route table and nothing else has been defined. Explicit would mean that a route table has been configured for use on that subnet. I hope that helps clarify any confusion you had regarding this. Regards, Nick"], "usr-3": ["Hi NickL, Thanks for answering my question. Based on what you said \"Explicit would mean that a route table has been configured for use on that subnet\" AND If you disassociate Subnet 2 from Route Table B, there's still an implicit association between Subnet 2 and Route Table B. If you no longer need Route Table A, you can delete it. If i really want to dissociate Subnet 2 from Route Table B, what do i have to do? Delete that subnet, right?"]}, "Question": "Hi everyone. I'm reading document about 'Route Table' The term 'explicitly' and 'implicit' made me a little confused. For example, this sentence 'If you disassociate Subnet 2 from Route Table B, there's still an implicit association between Subnet 2 and Route Table B. If you no longer need Route Table A, you can delete it.' What does 'still an implicit association' mean? Why not 'there's nothing between Subnet 2 and Route Table B'? Looking forward to hearing from you soon.", "Title": "What's the difference between implicit and explicit association?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=239115&tstart=50"}{"Answers": {"usr-1": ["Ah, it took about half an hour but finally the NAT Gateway has proceeded to deleted and the stack is updatable again."]}, "Question": "We have a CloudFormation template defining a VPC with a typical private/public subnet layout plus NAT Gateways. I needed to update this today to change some of the CIDRs for the subnets. However, upon one of the updates that needed to replace the NAT Gateways, the one with ID nat-037d172729caf62f3 has changed to the state 'Failed'. The stack update has failed due to this: 11:50:46 UTC+0800 UPDATE_FAILED AWS::EC2::NatGateway NatGateway1 NatGateway nat-03c1fb71c118013db is in state failed and hence failed to stabilize. Detailed failure message: Elastic IP address [eipalloc-58e0103c] is already associated However, all our EIP associations are via CloudFormation since we don't have any manual setup in that respect. Either way, since the NAT Gateway is in the failed state it is not undeletable in the console at least. Interesting the delete/update buttons for the CloudFormation stack containing this NAT Gateway are also greyed out meaning I can't even start again with these updates until this gets unblocked. It seems like the stack is stuck in the state UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS.", "Title": "NAT Gateway in \"Failed\" status with more CloudFormation updates blocked", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=239611&tstart=50"}{"Answers": {"usr-1": ["Hi there! Thanks for using AWS Developer Forums. As requested, I have created a new Default VPC in your AP-SOUTHEAST-1 Region. Let me know if there is anything else we can do. Best regards, Joel K."]}, "Question": "Hi, Can you please create for my account the default VPC in the Asia Pacific (Singapore) region?", "Title": "Please create default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=239670&tstart=50"}{"Answers": {"usr-1": ["Hello, We already have feature request for NAT Gateway support in sa-east-1 (Sao Paolo) region. Unfortunately, we do not have an ETA for when it will be available. You can look for updates at https://aws.amazon.com/new/ Thanks, Jay"], "usr-2": ["Thank you for your answer"]}, "Question": "Hello, Is there a planned release of Nat Gateways for Sao Paulo? I would like to save the trouble of setting up a nat instance and the migration to Nat gateway if the feature will soon be available. Thanks", "Title": "Availability of Nat Gateway in sa-east-1 ?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=240008&tstart=50"}{"Answers": {"usr-1": ["Hi Marco, how are you? Thank you for your question and sorry for any inconvenience. I understand that your are facing some issues on your both VPNs (vpn-f1eb0898 / vpn-36eb085f) and you are wondering if something has changed on AWS side or how can we help you. I have checked your VPN connections and I figured out the issue: You are advertising more than 100 prefixes at one point for your VPN connections through BGP. Please note that if you advertise more routes than are supported, you may experience this behavior. The IPSEC will come UP, but the BGP session will not be established. You can have up to 100 propagated routes per route table; however, the total number of propagated and non-propagated entries per route table cannot exceed 100 [1] [1] http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Appendix_Limits.html Please consolidate your network advertisement, trying to summarize your prefixes or advertise default route 0.0.0.0/0 (if applicable to your environment). I hope this information was helpful. If you have any additional questions or concerns, just let us know. Regards, Plinio @ AWS"]}, "Question": "Hello, we have a VPC with 2 vpn connections to our datacenters. VPN IDs are: vpn-f1eb0898 vpn-36eb085f This worked perfectly fine. But since a while it says under tunnel details IPSEC IS UP and the status is DOWN. I am not in control of the vpn/networking stuff on our side and our network group is not very helpful at the moment. Any idea what could be wrong? Something on the AWS side that can be checked (where nothing has changed)? Or where we can look on our side? Thank you Marco", "Title": "VPN Tunnel status down but IPSEC is UP", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=240283&tstart=50"}{"Answers": {"usr-1": ["Hi jventura, how are you? Thank you for your question. I understand that you are facing some issues with your VPN connection and your are trying to figure out what is happening. I have checked your VPN connection and everything looks good. I have also checked your VPC configuration, including route table, security groups, ACLs and I wasn't able to find any issue at this point. Regarding your traceroute, we need to investigate a little more, however I can tell you that some addresses that you see during your traceroute, such as 169.X or 54.X are normal and expected inside of AWS network. The tunnel IP addresses will not be visible, since your traffic will be encapsulated before leave the VPN endpoint. Are you able to run additional tests? For example: A packet capture between your EC2 instance and your on-premises server; Are you able to share your Cisco ASA configuration? You can send it private if you want. I hope this information was helpful. If you have any additional questions or concerns, just let us know. Regards, Plinio @ AWS"]}, "Question": "I have a VPN tunnel that's showing as UP, but if I'm on my AWS instance and run a traceroute to a server on the customer gateway side, I never see a hop to the tunnel (and I never get to the target server). My route table has an entry for the target address. The set up is: Tunnel IPs: 54.240.217.162 and 207.171.167.234 Static routes: IP Prefixes Source State 10.1.250.0/24 available Traceroute: xxx@xxxxxxxxx ~$ traceroute 10.1.250.40 traceroute to 10.1.250.40 (10.1.250.40), 30 hops max, 40 byte packets 1 169.254.255.109 (169.254.255.109) 0.412 ms 0.391 ms 0.370 ms 2 54.240.234.148 (54.240.234.148) 1.948 ms 169.254.255.17 (169.254.255.17) 21.951 ms 21.904 ms 3 205.251.245.54 (205.251.245.54) 1.571 ms 205.251.244.220 (205.251.244.220) 3.109 ms - 4 54.239.109.44 (54.239.109.44) 24.379 ms - - 5 54.239.111.13 (54.239.111.13) 1.625 ms 54.239.108.163 (54.239.108.163) 1.572 ms 54.239.108.197 (54.239.108.197) 1.654 ms 6 - - 72.21.222.129 (72.21.222.129) 4.395 ms 7 169.254.255.17 (169.254.255.17) 15.191 ms 15.150 ms 15.121 ms 8 - - - 9 - - - 10 - - - 11 - - - 12 - - - (repeats until 30 hops) Even if there was a problem on the VPN Router (Cisco ASA), I was expecting a tunnel ip address to show in one of the hops; and I can't tell what any of these ip addresses are (ie. 169.254.255.109, etc). What could I have mis-configured?", "Title": "VPN tunnel is UP but traffic not routing to tunnel", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=240403&tstart=50"}{"Answers": {"usr-1": ["Hi, When you create a VPC peering between 2 VPCs, a peering connection is created. You can then use this VPC peering connection to add a route in your routing table. In the new route destination you will put the destination network CIDR i.e. 192.168.0.0/16. On the target you will put the VPC peering connection ID which will have a prefix of 'pcx-'. You will need to create new routes on both VPCs. You can then connect from one instance to another instance in another VPC through their private IPs. For more information on VPC peering routing please refer to this link: http://docs.aws.amazon.com/AmazonVPC/latest/PeeringGuide/peering-configurations-partial-access.html Regards, Souza S"]}, "Question": "I have two VPC(s) with a peering connection between them In one of the VPC(S) I set up a bastion host with an elastic IP I now need to get from the bastion host to another ec2 instance in the second VPC but not sure how to set up route(s).", "Title": "routing between two VPC(s)", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=240433&tstart=50"}{"Answers": {"usr-1": ["Hi, Would you please send me a private message with the hostname and IP address so i can check for you. Regards, Souza S"], "usr-2": ["Hello. The PTR record was created. Thank you for all your help. Sanchez"]}, "Question": "I requested an rdns record, is there anyway I can receive an update on the request. How long does it usually take?", "Title": "RDNS Request", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=240862&tstart=50"}{"Answers": {"usr-1": ["Hi, I have reached out to the VPC team to release your IP. We will come back to you as soon as we have feedback. Regards, Souza S"], "usr-2": ["Hello, I show this EIP is no longer associated with your account. Please let us know if you have any other issues or concerns. Regards, Nick"]}, "Question": "An error occurred while attempting to release the IP addresses 52.9.60.126: The address with allocation id eipalloc-bbb371de cannot be released because it is locked to your account. Please contact AWS Support to unlock it. (Service: AmazonEC2; Status Code: 400; Error Code: InvalidAddress.Locked; Request ID: 456691cb-8f71-4924-8149-1dcbd8018aa0) Could you please release this IP from my account. Thank you!", "Title": "Remove elastic IP", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=241236&tstart=50"}{"Answers": {"usr-1": ["After reviewing the rules I found the problem."]}, "Question": "Hi Folks, I created a VPC with 02 subnets, one private (subnet-15010871) other public (subnet-14010870) in us-west-2 region. In the public I added an EC2 as bastion host (ami-c4469aa4 / amzn-ami-vpc-nat-hvm-2016.09.0.20160923-x86_64-ebs) and in the private subnet I launched another EC2 that I want to ssh into from bastion. Bastion has Src/Dest verification turned off. Private instance doesn't. The VPC has IGW, a public routing table associated with the public subnet with route 0.0.0.0/0 to IGW, and a private routing table with a local route to VPC CIDR block (172.22.0.0/16). From my office I can SSH into bastion ok. Once in bastion (ie, not yet doing a ssh jump) I try to SSH into private and I got no response at all. From the bastion I can ping the private instance ok. Using the flowlog to capture traffic I can see that the ssh from bastion was accept and right after it there is a bunch of ---NODATA logs but no output log (either accept or reject) is captured. I thought that security groups could be restricting the output but given that it is statefull that should not be the case, right? I cant figure out what I'm missing in my setup. Below are the details of SG and NACLS. Could Someone help me out reviewing it? Regards, Public Subnet have a Publlic NACL (acl-df428fb8) with the following rules: inbound #NUMBER,TYPE,PROTO,PORT,SRC,ACTION #120, SSH (22), TCP (6), 22,0.0.0.0/0, ALLOW #130, ALL TCP, TCP (6), ALL, VPC CIDR/16,ALLOW #140, ALL ICMP,ICMP (1),ALL,0.0.0.0/0,ALLOW # - , ALL Traffic,ALL,ALL,0.0.0.0/0,DENY outbound #NUMBER,TYPE,PROTO,PORT,SRC,ACTION #140, ALL ICMP, ICMP (1), ALL, 0.0.0.0/0, ALLOW #150, Custom TCP Rule, TCP (6) 1024-65535, 0.0.0.0/0, ALLOW #- ,ALL Traffic, ALL, ALL, 0.0.0.0/0, DENY Private Subnet have a Publlic NACL (acl-de428fb9) with the following rules: inbound #NUMBER,TYPE,PROTO,PORT,SRC,ACTION #120, SSH (22), TCP (6), 22, VPC CIDR, ALLOW #140, ALL ICMP,ICMP (1),ALL,0.0.0.0/0,ALLOW # - , ALL Traffic,ALL,ALL,0.0.0.0/0,DENY outbound #NUMBER,TYPE,PROTO,PORT,SRC,ACTION #140, ALL ICMP, ICMP (1), ALL, VCP CIDR, ALLOW #150, Custom TCP Rule, TCP (6) 1024-65535, VPC CIDR, ALLOW #- ,ALL Traffic, ALL, ALL, 0.0.0.0/0, DENY Bastion Host have a security group Bastion SG (sg-98bd2ce1) with the following rules: inbound TYPE, PROTOCOL, PORT RANGE, SRC SSH, TCP, 22, 0.0.0.0/0 Custom ICMP Rule, Echo Request, 0, 0.0.0.0/0 outbound All traffic, All, All, 0.0.0.0/0 Private Host have a security group SG (sg-a6bd2cdf) inbound TYPE, PROTOCOL, PORT RANGE, SRC SSH, TCP, 22, sg-98bd2ce1 (Bastion SG) Custom ICMP Rule, Echo Request, sg-98bd2ce1 (Bastion SG) outbound All traffic, All, All, 0.0.0.0/0", "Title": "Cannot SSH into Private from Bastion", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=241375&tstart=50"}{"Answers": {"usr-1": ["Hi, If you could please PM me your account ID and update this thread when you have sent the PM, I'll be happy to recreate your default VPC. Best Regards, Omar S."], "usr-2": ["Sent the PM."], "usr-3": ["I've recreated the Default VPC for the account in the US-East-1 region. Best Regards, Omar S."], "usr-4": ["Thanks!"]}, "Question": "Please re-create the default VPC for my us-east-1 region. Thanks!", "Title": "Need Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=241473&tstart=50"}{"Answers": {"usr-1": ["Turned out this was a configuration issue on the customer router. All resolved for now."]}, "Question": "Hi, I have set up to VPN connections, in each I have only brought ine tunnel up. The tunnel is marked as UP. I am using static configuration, but can see that when the tunnel is up the route is propogated into the main routing table (the only routing table that I have configured). I have checked the security groups, and they appear OK, and I am using the default NACL (allow all in/allow all out). Pings just timeout, traceroute provides no additional infromation (all hops return -). More detailed infromation below. Any ideas what I have missed here, or what I can do to further troubleshoot this? Thanks. VPC: vpc-ff54409a (10.23.0.0/21) VPG: vgw-4acffd57 VPN: vpn-cdca2ea4 and vpn-8bf014e2 Subnets: 10.23.0.0/24, 10.23.1.0/24, 10.23.2.0/24, 10.23.7/0/24) [VPNs to allow traffic to/from 10.23.0.0/24 subnet only). Concentrating on: vpn-8bf014e2 Static Routes: IP Prefix Source State 10.4.31.0/24 available 192.168.10.0/24 available Route Table: rtb-23e72347 (all subnets implicitely associated) Destination Target Status Propagated 10.23.0.0/21 local Active No 0.0.0.0/0 igw-76b0c513 Active No 10.4.31.0/24 vgw-4acffd57 Active No 172.17.245.0/24 vgw-4acffd57 Active No 192.168.10.0/24 vgw-4acffd57 Active No Security Group: sg-432c1827 (assigned to interfaces on 10.23.0.0/24 subnet) Inbound: Type Protocol Port Range Source SSH (22) TCP (6) 22 0.0.0.0/0 HTTP (8080) TCP(6) 8080 0.0.0.0/0 ALL ICMP ICMP (1) ALL 10.4.31.0/24 ALL ICMP ICMP (1) ALL 192.168.10.0/24 ALL Traffic ALL ALL 10.23.0.0/24 Outbound: Type Protocol Port Range Destination ALL Traffic ALL ALL 0.0.0.0/0", "Title": "VPN issue - unable to ping in either direction", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=241828&tstart=50"}{"Answers": {"usr-1": ["The solution was to: 1. Create a fourth network (10.200.0.192/26) - Calling this the \"public\" ones (won't have any instances or anything in it, just a means to attach the NAT and IGW to). 2. Make this network the default network 3. Create a new route table 4. Associate this route table with the network from point 1 5. Create a route \"0/0 -> igw-blabla\" 6. Create a new NAT gateway 7. Associate this NAT with the network from point 1. 8. Create a route \"0/0 -> nat-blabla\" 9. Associate that last route entry with the route tables for my other subnets (i.e., the private ones)"]}, "Question": "I'm trying to get my head around how to implement both a IGW and a NAT on my three networks, spread out on the three AZ in Ireland. The documentation ( https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-nat-gateway.html ) keeps talking about a private net and a public net, putting the IGW on the public and the NAT on the private, then route 0/0 on the private net to the NAT and 0/0 to the IGW on the public network, but I have no need for that! They're ALL private! ALL my instances should be on a private network, not reachable by anyone (they're support services for the rest of my upcomming infrastructure). However, all the instances in there needs to be able to reach the 'Net (for 'apt' updates etc). This is what I'm doing in more detail: VPC 'test' : 10.200.0.0/24 Net #1 (AZ1): 10.200.0.0/26 Net #2 (AZ2): 10.200.0.64/26 Net #3 (AZ3): 10.200.0.128/26 \u00a0 NAT gateway: Subnet: Net #1 (AZ1) EIP: a.b.c.d \u00a0 Internet gateway: Subnet: VPC 'test' (10.200.0.0/24) \u00a0 VPC Route table: 10.200.0.0/24 local 0.0.0.0/0 nat-blabla This is (obviously) wrong, because this doesn't route from the NAT to the IGW . But I'm not sure how to solve this, since I don't have two networks with services spread on both networks. I tried the most obvious, creating a fourth network 10.200.0.192/26 a separate route table and a route to 0/0 -> IGW-blabla in that route table but that didn't help either (not that I really thought it would, but it was worth a try).", "Title": "NAT and IGW on the same network as instances?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=241912&tstart=50"}{"Answers": {}, "Question": "I'm fairly new with building out in AWS, and I'm having an issue with using a NAT Gateway. I have a Public VPC and a Private VPC, but am having issues with the Private VPC seeing the NAT Gateway for internet access. I can't seem to add a route in the private VPC for 0.0.0.0/0 to point to the NAT Gateway which is living in the Public VPC. Not sure what I'm doing wrong, and have watched a number of AWS videos and trying to research this issue, but unable to figure out the issue. Any thoughts? Edited by: divinselem on Nov 3, 2016 12:17 PM", "Title": "NAT Gateway Issue", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=242451&tstart=50"}{"Answers": {"usr-1": ["Hello, I have created a new default VPC for you in us-east (N Virginia) Regards, Kay"]}, "Question": "Hi, could you please restore the default VPC for US East (N Virginia) region in my account? Thanks", "Title": "Restore default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=242840&tstart=50"}{"Answers": {"usr-1": ["Hi there, how are you? Thank you for your question. Regarding you question, the pre-shared key mentioned on this article should be chosen by you. You can use a simple string, i.e \"vpn123\" (not recommended, too weak) or you can use a more complex password, including special characters, i.e \"Iua89.Y13q\". The pre-shared key must be saved according to the article and configured on both OpenSwan servers. For example: $ sudo vi /etc/ipsec.d/vpc2-to-vpc1.secrets <EIP2> <EIP1>: PSK \"Iua89.Y13q\" I hope this information was helpful. If you have any additional questions or concerns, just let us know. Regards, Plinio @ AWS"]}, "Question": "Hi everyone, So i'm following this tutorial to create a VPN connection between 2 instance in 2 different regions. The problem was: i don't understand what the 'pre-shared key' is. Can i use any string as pre-shared key or i need/have to generate it using some specific tool or something? https://aws.amazon.com/articles/5472675506466066 Any help would be greatly appreciated!", "Title": "What's the the pre-shared key in Connecting multiple VPC with EC2 (IPSEC)?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=242848&tstart=50"}{"Answers": {"usr-1": ["To be able to do my request. I had to add to go EC2, network interface. Get the public-ip of RDSNetworkInterface then add the ip in inbound security group permitted as Redshit type. It now working but is what I need to do. Seems like a \"hack\" or noob solution."], "usr-2": ["The other way of doing it is to use the private IP of the redshift server that is listed in EC2 network interface. Then use this IP when creating the server for dblink: CREATE SERVER foreign_server FOREIGN DATA WRAPPER postgres_fdw OPTIONS (host '<private redshift ip>', port '5439', dbname '<my_dbname>', sslmode 'require'); \u00a0 I should be good if they are in the same VPC"]}, "Question": "Hello I'm using Redshift and RDS postgres in the same VPC. I have 4 subnets. 3 'public subnets' that are part of a route table with a 0.0.0.0/0 internet gateway : 2 are RedshiftNetworkInterface 1 is RDSNetworkInterface 1 'private subnet' that are part of a route table with 0.0.0.0/0 deny and a NAT gateway : 1 Interface gateway I have no problem to connect to Redshift and PG but I fail when trying to do this : https://aws.amazon.com/blogs/big-data/join-amazon-redshift-and-amazon-rds-postgresql-with-dblink/ ERROR: could not establish connection DETAIL: could not connect to server: Connection timed out Is the server running on host '----.eu-west-1.redshift.amazonaws.com' (52.210.---) and accepting TCP/IP connections on port 5439? On the AWS blog post about dblink it's written : Configure the VPC security group for the Amazon Redshift cluster to allow an incoming connection from the RDS PostgreSQL endpoint. But In my case they are in the same VPC, I should have access to it ? no ? In the security groups I have permited all traffic from the VPC group. Where is the issue ? I'm lost. Thanks in advance for your help.", "Title": "Issue when trying to use dblink (RDS -> Redshift)", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243035&tstart=50"}{"Answers": {"usr-1": ["I've re done all the steps from scratch and check everything step by step. It is now working i can ping from/to : 10.2.1.0/24 from/to 10.1.0.0/24. Edited by: Jerome on Nov 15, 2016 8:30 AM"]}, "Question": "Hello, I have set up a peering connection between VPC A(10.1.0.0/16) and B(10.2.0.0/16). VPC A and B have both 2 subnets. One subnet have a route with the Internet Gateaway the other subnet have a route with a NAT Gateway. So We have in both VPC an interface connected to internet and the other interface that is isolate from Internet but can connect to it for updates. I manage to create the VPC peering between A and B. And create the routes tables like this : VPC A 10.1.0.0/16 Local 10.2.0.0/16 pcx-aaabbb VPC B 10.2.0.0/16 Local 10.1.0.0/16 pcx-aaabbb I changed the secutity groups to allow the ping from my public instances. But i cannot transmit packets from instance A to instance B with the private IPs. Maybe there is something i missed. I don't undersatand why this is not working. And I have allowed DNS resolution from peer and local VPC to private IP Thank you in advance for help. Edited by: Jerome on Nov 15, 2016 2:04 AM", "Title": "Trying to ping to VPC B from VPC A", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243058&tstart=50"}{"Answers": {"usr-1": ["Hello, We cannot recreate specific default VPC elements, only recreate the entire default VPC if it has been deleted. If you'd like a new default VPC (with all subnets) please delete your default VPC and update us here that you'd like a new one. Regards, Nick"], "usr-2": ["Thanks... the default VPC has been deleted, could you please create a new one Edited by: ltisandbox on Nov 16, 2016 12:20 PM"], "usr-3": ["Hello, Can you send me your account ID in a PM so we can further look into this issue for you. Once you do reply to this thread telling us so. Thank you"], "usr-4": ["Account ID sent, could you please create a new default vlc Thanks"], "usr-5": ["Thanks... We received it and have recreated your default VPC."], "usr-6": ["Looks good, thank you so much"]}, "Question": "Could we get subnet-f052c1a9 added as the default subnet for VPC ID vpc-1d93b678 in N Virginia region. The default subnet was accidentally deleted at some point. Thanks", "Title": "Default Subnet", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243087&tstart=50"}{"Answers": {"usr-1": ["Hello, You have no direct control over recreating your default VPC. Simply let us know what region you want your default VPC recreated in via the forums and we can take it from there. Regards, Nick"], "usr-2": ["Hi, Thanks for the answer, my region is \"S\u00e3o Paulo\". Please, can you recreate for me? Regards, Cassio"], "usr-3": ["Hi Cassio, Sorry, but I am not able to find your AWS account. Would you be able to PM me your account id? Regards, Jayakrishnan L."], "usr-4": ["Hi, Default VPC - vpc-fceb4f98, has been created for you in Sao Paulo. Regards, Jayakrishnan L."], "usr-5": ["Hi Jayakrishnan, Great! Thanks a lot! It's works! Regards, Cassio R"]}, "Question": "Hi, I have deleted my default VPC, how can I recreate my default VPC please? Regards, Cassio R.", "Title": "Deleted Defaut VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243097&tstart=50"}{"Answers": {"usr-1": ["Hi Alex, Can you PM me your account ID? Regards, Jayakrishnan L."], "usr-2": ["Hi, Jayakrishnan L. My account ID is XXXXXXXXXX. Thanks. Br, Alex. Edited by: AlexMaocash on Nov 21, 2016 11:07 AM"], "usr-3": ["Hello Alex, Your default VPC in eu-west-1 has been recreated as vpc-c19fe7a5. Regards, Nick"], "usr-4": ["Hi, Nick. Thank you very much. Br, Alex."]}, "Question": "Hello. I have deleted my default VPS. Please, create new default VPS for me in 'EU (Ireland)' region. Thank you. Alex. Edited by: AlexMaocash on Nov 19, 2016 10:10 AM", "Title": "Default VPS", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243387&tstart=50"}{"Answers": {"usr-1": ["Open up the VPC Management Console and select \"Your VPCs\" from the menu. There is a column labeled \"VPC CIDR\". That is the IP address space you have allocated to your VPC. It defines the bounds for the subnets you create in the VPC. In this particular case, it sounds like the VPC CIDR may have been set to 192.168.0.0/24. That is unfortunately a very limited address space since /24 only allows 192.168.0.0 - .255 to be used for subnets. 192.168.0.0/16 would be a better choice for example since it enables you to work with the entire private address space in the 192.168 range. That's 192.168.0.0 - 192.168.255.255. If my assumption is correct, I'm afraid that you need to migrate to a new VPC with a less restrictive VPC CIDR."], "usr-2": ["Oy. It is very strange. But now i understand this error. Thank you."], "usr-3": ["Hello, Thank you for the post. I completely agree with D. Svanlund. The reason you are getting this error is because the CIDR for your VPC is set to 192.168.0.0/24. The CIDR you are trying to create:192.168.1.0/24 is out of range of the VPC CIDR. For your use case, you would need another VPC with a broader CIDR, may be 192.168.0.0/16, you will be able to create both the listed subnets. For more details on VPC subnets: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html I hope this information helps, should you require further assistance, do not hesitate to reach out. Best regards, Karan S."], "usr-4": ["Thank You. How do I change VPC a to b ? I want place RDS to my VPC. But RDS need create three subnets. I know, VPC can't change VPC CIDR Edited by: lanawan on Nov 25, 2016 6:17 AM"]}, "Question": "I have VPC with subnet 192.168. 0 .0/24 I can't create subnet 192.168. 1 .0/24 Error: 192.168.1.0/24 is not within the range of 192.168.0.0/24 Why? Edited by: lanawan on Nov 21, 2016 8:31 AM", "Title": "Can't create new subnet", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243493&tstart=50"}{"Answers": {"usr-1": ["I had to modify the security group (for RDS) to give access to my EC2 instance on the Public Subnet, then I was able to connect. Phew! This comment in Server Fault helped me out http://serverfault.com/a/705021 Edited by: Pictograph on Nov 22, 2016 8:56 AM"], "usr-2": ["Hi, I see your database instance is allowing access only on a specific port to the instance in public subnet. Hence, are you getting error while reaching on that port as well. I do not see rules on the network acls that could be blocking the access. Please make sure you are allowing access to proper ports on the ingress security groups and corresponding network acls if you are using custom network acls. Thanks!"]}, "Question": "I have setup my VPC exactly as shown here http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Scenario2.html . I can't get to access my RDS instance from my public subnet But the DB is accessible from within an AWS Lambda which is on the private subnet. Here are my Route Table entries. Public Subnet Destination Target Status Propagated 10.0.0.0/16 local Active No 0.0.0.0/0 igw-XXXXXXXX Active No Private Subnet Destination Target Status Propagated 10.0.0.0/16 local Active No 0.0.0.0/0 nat-XXXXXXXXXXXXX Active No My EC2 instance id is i-85fe6511 and is on the Public Subnet with IP address 10.0.0.56 Can someone please help? Have been stuck on this for long Edited by: Pictograph on Nov 22, 2016 7:50 AM", "Title": "Can't access RDS instance inside a private subnet from public subnet", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243565&tstart=50"}{"Answers": {"usr-1": ["Hello, I've recreated your default VPC in eu-west-1 as vpc-6d9de509. Regards, Nick"], "usr-2": ["thanks"]}, "Question": "Hello I accidentally deleted the default VPC, now I get an error message each time I want to create a new instance (region eu-west-1) May somebody create one for me, please ? Thanks", "Title": "Can't create a Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243612&tstart=50"}{"Answers": {"usr-1": ["Hello, This is to let you know that we have recreated a new default VPC in Singapore Region in your account. Regards, Anand"], "usr-2": ["thank you!"]}, "Question": "Hi, Someone deleted our default VPC in Singapore region. Could you please recreate it? thank you very much, anusidh", "Title": "deleted default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230006&tstart=125"}{"Answers": {"usr-1": ["Hello David, As requested, subnets subnet-02ab8f75 and subnet-edf2cc88 have been made the default for the Default VPC vpc-be444edc in the ap-southeast-2 region. Best regards, Justin G."], "usr-2": ["Thank you Justin!"]}, "Question": "Dear AWS Support, Could you please mark the following subnets as default under my account: subnet-02ab8f75 subnet-edf2cc88 Thank you, David", "Title": "default VPC subnet", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230044&tstart=125"}{"Answers": {"usr-1": ["Hello Duho An , Per your request, I've created a new default VPC in the N.California region. This should now be available for any new resources you launch in this region. Have a great day. Yaseen S."]}, "Question": "I was testing AWS and I deleted my default VPC. It looks like beanstalk won't work without one, so could you please restore the default VPC on my account? Thank you.", "Title": "Restore default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230117&tstart=125"}{"Answers": {"usr-1": ["Hello, I've recreated your default VPC as requested as vpc-a3604cc6. Regards, Nick"]}, "Question": "hi, I deleted my default VPC, so could you please restore the default VPC on my account? Thank you.", "Title": "Restore default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230185&tstart=125"}{"Answers": {"usr-1": ["Hello Michael, I've recreated your default VPC, which will take a few moments to recreate. Let us know if you run into any other issues. Regards, Nick"]}, "Question": "Hello, I accidentally deleted my default VPC cleaning up my account after some lectures. Would it be possible to create a new VPC? Thank you so much! Michael", "Title": "Deleted default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230194&tstart=125"}{"Answers": {"usr-1": ["Hello, I've created a new default VPC in the ap-southeast-2 region of your account. Happy learning! -Chris"], "usr-2": ["Thanks Chris!"]}, "Question": "Hi, I unfortunately deleted my default VPC while still learning the ropes. Now that I know that's not a great idea, would it be possible to have a new default created?", "Title": "Deleted default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230435&tstart=125"}{"Answers": {"usr-1": ["Hello, I've recreated your Default VPC in eu-west-1 as vpc-658f7901. Regards, Nick"], "usr-2": ["Hi, My Default VPC has been deleted in error. Can this please be re-created in EU West (Ireland) eu-west-1 Thank you"]}, "Question": "Hi, My Default VPC has been deleted in error. Can this please be re-created in EU West (Ireland) eu-west-1 Thank you", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230673&tstart=125"}{"Answers": {"usr-1": ["Replying to my own thread so others can benefit. We followed the advice from this thread: Link: https://forums.aws.amazon.com/thread.jspa?messageID=570840 and on the OpenVPN server are doing NAT. This resolves the issue since all traffic from VPN clients looks as if its coming from our \"OPS VPC\"; so return traffic from the peered VPCs can get back It doesn't allow for reverse communication, initiating something from the VPC to a VPN client, but we can live with that. Edited by: pmarcus01 on May 4, 2016 9:17 AM"]}, "Question": "Dear VPC Users, We have a design we're trying out for our AWS install and different environments (dev,prod,etc). As part of this we have a design as follows: 'Ops VPC' | | (VPC Peering) | | (VPC peering) / \\ / \\ 'Dev VPC' 'Prod VPC' Essentially, we have our OPS VPC peered with our Dev and Prod. (dev and prod themselves are not peered) We run our OpenVPN server in the Ops VPC, and we were hoping to only run that one VPN server to connect to all VPC's peered with Ops (dev and prod, eventually also test and staging). Since a VPC won't accept traffic for an IP block that isn't within its own VPC IP space, what we did was create our ops VPC in the general 192.168.0.0/16 IP Space with 2 subnets 192.168.200.0/23 and 192.168.202.0/23. Our OpenVPN server is on the 192.168.200.0/23 subnet, but its internal IP space (for the vpn connections themselves) is in a 192.168.20.0/24 subnet. What we tried to do, was create a route table entry in our OPS VPC, so that any traffic destined to our VPN block (192.168.20.0/24) has a destination to our VPN server. However, when we try to create this route table entry, we get the following error: 'cannot create a more specific route for 192.168.20.0/24 than local route 192.168.0.0/16 in route table rtb-6b57080e (Service: AmazonEC2; Status Code: 400; Error Code: InvalidParameterValue; Request ID: 983b04d9-4b13-4d83-b2ac-7053880ad811`' I understand why AWS doesn't allow this, since then someone could create a subnet with 192.168.20.0/X and there would be two of the same routes with different destinations which may break things. However, it seems like a common enough use case. The solution would simply be to see if any routes exist with the IP space before allowing creation of the subnet. That would prevent duplicate routes to different destinations, while allowing more specific routes. Having specific routes within a more general routing table is a common networking solution for things like this. Any chance this could put on a roadmap somewhere? Thank You, Philip Marcus", "Title": "Feature request / more specific route in local route table", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230692&tstart=125"}{"Answers": {"usr-1": ["Problem is fixed when ownership is changed from root to ubuntu for designated folder."]}, "Question": "While trying to send files via SFTP (between 2 machines on Ubuntu 14.04) I received a message: 'Invalid reply received' File manager: Files 3.10.1 (Nautilus) How to fix it, please? Edited by: pinuta on May 4, 2016 6:42 AM", "Title": "Error on the file manager", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230732&tstart=125"}{"Answers": {"usr-1": ["Hi, I've looked at your account and I'm unable to find a region where you are missing a Default VPC. Could you let me know in which region you need to recreate it? Please note that AWS Support can only recreate a Default VPC if it has been deleted. Best Regards, Omar S."], "usr-2": ["Thanks. It looks like what we need is a default subnet in vpc-1d93b678. It doesn't matter if it is a new subnet or one of the existing becomes the default."], "usr-3": ["Could we get subnet-f052c1a9 added as the default subnet for VPC ID vpc-1d93b678 in N Virginia region. Thanks Edited by: ltisandbox on Nov 15, 2016 6:52 AM Edited by: ltisandbox on Nov 15, 2016 7:06 AM"]}, "Question": "Please restore my default VPC in my account.", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230743&tstart=125"}{"Answers": {"usr-1": ["Hello Roman-aws, I'm sorry to hear you deleted your default vpc in your account, but for what cI can see, the 4 default vpc missing are in an hybrid EC2 Classic and VPC configuration, while this configuration stands, we will not be able to recreate your default vpc, since this operation is only allowed in VPC environments. If you want the default vpc for those regions (Ireland, N.virginia, Oregon and San Francisco) you should first delete all the ec2 classic resources in those regions (Ec2 instances, Elastic IPs Security Rules, Gateways, etc) and then request the migration to VPC for the region. I will recommend you to ask for that through a Technical Support Case, this will improve the time of resolution and will give you a full support experience in this matter. Thanks for reach us and have a nice day Cheers! Javier C#"]}, "Question": "Please restore default VPCs in my account.", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230823&tstart=125"}{"Answers": {"usr-1": ["Hello Matt, Per your request, I've created a new default VPC in the N.Virginia region. This should now be available for any new resources you launch in this region. Have a great day. Yaseen S."], "usr-2": ["Thank you!"], "usr-3": ["Hi, Can you please restore my VPC in us-east-1 too? Many Thanks, Lukas"]}, "Question": "While learning the system and I accidentally deleted my default VPC for US East and realize now it's not easy to restore. Could I please get some assistance in recreating that? Thanks!", "Title": "Need Default VPC Recreated", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=230811&tstart=125"}{"Answers": {"usr-1": ["Any help would be greatly appreciated."], "usr-2": ["Is the load balancer going to be accessed by external users on the Internet as well as other machines inside the same VPC? If that is the case, it could make sense to make your service available through both public and internal load balancers. A single service hosted on some number of EC2 instances would likely need two load balancers - one public and one internal. If your goal is to make your service available to external users only, a single public load balancer is all you need. Let me know what you're looking for more specifically. I would be happy to explain this in more detail"], "usr-3": ["Hi, Thank you for the answer, i'm new to the AWS in general and ELB in particular. I just want to know if there is use-case in which both Internal and External Load Balancing exist and your answer helped me about that."]}, "Question": "I'm just wondering if there is any scenario that i could use both of Internal and External Load balancing. For example, i have one VPC with 3 private subnet and 1 public subnet. Every subnet has their own EC2 Instance. 3 of these private subnet could connect to Internet using VPC NAT gateway in Public Subnet. I was thinking about one Internal Elastic Load Balancing used for 3 of these Private Subnet and one External Elastic Load Balancing used for 1 Public Subnet. The question is i'm not so sure about having both 2 types of load balancing. Could someone help me clarify about this? I really appreciate.", "Title": "Is it possible to use both of Internal and External Elastic Load Balancing?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231017&tstart=125"}{"Answers": {"usr-1": ["Hi, We have created default VPC - vpc-6e45620b on Tokyo Region of your account. Regards, Jayakrishnan L."], "usr-2": ["Thank you for your help! I confirmed default VPC was created."]}, "Question": "Could you create default vpc for region ap-northeast-1 (tokyo)? I failed to create launch configuration for auto scaling group after I had deleted default vpc. Thank you in advance.", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231071&tstart=125"}{"Answers": {"usr-1": ["Hello, Thanks for using AWS, One option is to add the IP into blacklist of your web application. Another option is to move to CloudFront+WAF, please refer the forum post below: https://forums.aws.amazon.com/thread.jspa?threadID=220417"]}, "Question": "Hi, I have a setup where I have multiple EC2 instances behind an ELB, everything in VPC. The ELB iistening on port 80 open to everyone on internet. Now l am suspecting an attack on the servers from a specific IP address coming through the ELB and I want to block that IP address from sending request to my web servers (through the ELB) I tried blocking the IP on Network ACLs but I still see the request coming from that IP. My understanding is that the Network ACLs wont apply to the traffic from internet to the ELB, it only applies to the traffic from ELB to my EC2 machines and since my EC2 machines are getting the request from ELB's internal IP, my NACL's rule for blocking that IP does not work. Can anyone tell me how do I block the requests from an external IP hitting my webservers through the ELB?", "Title": "How to block a specific IP address at the ELB level", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231168&tstart=125"}{"Answers": {"usr-1": ["Bump Anybody ???"], "usr-2": ["Since nobody answered my question, I am updating the thread with the answer I got from AWS technical services. The peering connection can only route traffic to the destinations it knows, which are the networks of connected VPCs. Since packet source in my case comes from docker container network and it is not NATed, return packets are being dropped on the peering connection gateway. The feature request on AWS's road-map that will enable VPC peering to support transitive routing however there is no ETA for it at this stage."], "usr-3": ["May I ask why do you want to route all the traffic when you just probably(am I right?) need to access only a service or a couple of services in K8S? Best, -Iulian"]}, "Question": "Hi everybody, I have been struggling with following issue and any help on the matter would be highly appreciated. I have two VPCs: 1) 172.10.0.0/16 2) 172.20.0.0/16 In VPC#2 I have running kubernetes cluster with docker containers. The IP address of one container is 10.244.0.8 residing on a host 172.20.0.197. I am trying to reach IP address of the container (10.244.0.8) from VPC#1, specifically from IP address 172.10.1.234. Tests performed: 1) I can ping 172.10.1.234 from 10.244.0.8 (reverse direction) 2) I can ping 10.244.0.8 from 172.20.0.61 (other server in the same VPC) 3) I can ping 172.20.0.197 from 172.10.1.234 4) I cannot ping 10.244.0.8 from 172.10.1.234. I have been running tcpdump on 172.20.0.197, but there are no packets reaching the server from 10.172.1.234. I checked routing tables and security groups and everything seems to be fine. Any suggestion what I should check or test I should run to figure out the problem? My guess so far is that the packets are being either misrouted or dropped on VPC border. The reason it can ping from container server in the other VPC is that the IP address of the container is masqueraded and packet traverses VPCs with origination IP address of 172.20.0.197. Thank you in advance for your help and thoughts.", "Title": "Routing traffic between VPCs to a docker container", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=231234&tstart=125"}{"Answers": {"usr-1": ["Hi there, Thanks for using the AWS Developer Forums. US-WEST-2 (Oregon) already has a Default VPC. I do see that you've deleted the Default VPC in US-EAST-1 (N. Virginia) so I have created a new one. Best regards, Joel K. Amazon Web Services"]}, "Question": "as title", "Title": "requesting to reset my vpc for us oregon", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232089&tstart=100"}{"Answers": {"usr-1": ["Hello there. You Default VPC in US-WEST-1 has been recreated."]}, "Question": "Please (re)create default VPC in us-west-1", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232646&tstart=100"}{"Answers": {"usr-1": ["Hello, thanks for getting in touch with us. We have two option here: if you prefer we can re-create for you a default VPC ex-novo (this may have the advantage of a fresh new environment) or we can proceed in marking the VPC vpc-a608a6cf (and related subnets) you mentioned as default. Please let us know what's the best option for you so that we will proceed accordingly. Kind regards Ale"], "usr-2": ["Best option is to set the current, existing vpc as default, as all other stuff like security groups and existing subnet settings depend on it. It would be rather painful to recreate that."], "usr-3": ["Hi, I was just checking with our team. Unfortunately you cannot mark an existing VPC as a default VPC. So the only option you have is re-creating a default VPC. Please let me know if we should go ahead with this. More information on deleting a default VPC can be found here: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/default-vpc.html#deleting-default-vpc Regards, Souza S"], "usr-4": ["It was a faulty Security Group specification in our ebextensions configuration. Removing it resolved the error."]}, "Question": "I have deleted our old default vpc and setup a new one. Now Elastic Beanstalk is failing at deploying new Software. Creating security group ingress named: sslSecurityGroupIngress failed Reason: The security group 'sg-e075b788' does not exist in default VPC 'none' Can you set the default flag for our vpc-a608a6cf in Region Frankfurt?", "Title": "Set Current VPC as default", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232504&tstart=100"}{"Answers": {"usr-1": ["Hi, I can see that the default network on us-east-1 for your account - 8XXXXXXXXXX79 is EC2-Classic. Thats why you do not have a Default VPC in us-east-1. The simplest way to get a default VPC is to create a new account in a region that is enabled for default VPCs. If you want to create a Default VPC on your existing account, you need to make your account (for region us-east-1) 'VPC Only'. We can only enable an existing account for a default VPC if you have no EC2-Classic resources for that account in that region. Additionally, you must terminate all non-VPC provisioned Elastic Load Balancers, Amazon RDS, Amazon ElastiCache, and Amazon Redshift resources in that region. After your account has been configured for a default VPC, all future resource launches, including instances launched via Auto Scaling, will be placed in your default VPC. You will not able able to use the EC2 Classic network any more on the region. You can read more about this on our documentation here. To request your existing account be setup with a Default VPC, contact AWS Support. We will review your request and your existing AWS services and EC2-Classic presence to determine if you are eligible for a default VPC. Regards, Jayakrishnan L."], "usr-2": ["Many thanks for the assistance!"]}, "Question": "Hi, please can someone re-create my default VPCs. I deleted them without realising it wasn't something I could reverse! thanks!", "Title": "Please re-create my default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232681&tstart=100"}{"Answers": {"usr-1": ["Hi, There are two types of networks in EC2, i.e EC2-classic and VPC network. The EC2-classic network is like one public CIDR block where you can only define what you want to allow in your instance but you can not use the security group to block outbound traffic. Whereas in the VPC network, you have your own separate CIDR block that you can partition into different subnetworks, private or public or both. The security groups here allow you to configure what to allow in and what to allow out. That's the primary difference between the two security groups. EC2-Classic network security group ==> igress only VPC- Network security group ===> igress and egress Also please not that you can not interchangeably use these security groups. Each is specific to its network. I hope this helps. Regards, Matombo T"], "usr-2": ["Thank you so much for your answers. I think i understand now."]}, "Question": "Hi everyone, When it comes to security group, i realized that there are 2 types of 'Security Group' that i can create in AWS console. They're 'VPC Security Group' and 'EC2 Instance Security Group'. I created one security group in EC2 Dashboard called 'Test' for example. When i clicked the 'Security Group' in both VPC Dashboard and EC2 Dashboard, i still could see 'Test' in there. So are they the same or different?", "Title": "Are VPC's security group different than EC2's security group?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232712&tstart=100"}{"Answers": {"usr-1": ["Hi, I've recreated your Default VPC in the US-East-1 region. Best Regards, Omar S."]}, "Question": "Please re-create my default VPC in us-east-1. Thank you!", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232753&tstart=100"}{"Answers": {"usr-1": ["Hi, I'm sorry to hear you deleted your default VPCs in oregon, n.virginia and ireland. I have recreated for you the ones in oregon and ireland, sadly the N.Virginia Region in your account is an EC2-Classic/VPC region. We won't be able to recreate the default vpc in that region unless you delete all the ec2classic components in it. Ec2 instances, ENIs, Subnets and EIPs included. Cheers Javier C#"], "usr-2": ["Hi Javier, Thanks for doing that. I think I should be fine as it stands. Best wishes Michael"]}, "Question": "Hi, I've deleted my default VPC in Virginia, Oregon and Ireland. Could you please remake them for me? Best wishes Michael", "Title": "Deleted my default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232814&tstart=100"}{"Answers": {"usr-1": ["It's back (and it did show up in the AWS status page after I posted as well.)"], "usr-2": ["Hello, Thank you for the post. Between 9:00 AM and 12:15 PM PDT, we experienced increased error rates for the VPC Management Console. VPC APIs were not affected. The issue has been resolved the service is operating normally. For more information about this issue, please refer to the service health dashboard on this link: http://status.aws.amazon.com/ I hope the above information helps. Regards, Nikhil"]}, "Question": "For the past two hours or so I've been unable to access the VPC console in the eu-west-1 region. The VPC console page starts to load, then (sometimes) pops up an error 'We're sorry, but an error occurred while processing your request. Please try again later.', then reloads. The page continuously reloads. I can access the VPC console in other regions (us-east-1, us-west-1 and us-west-2) fine. I've tried two different browsers (Firefox and Chromium) and also tried in a private/incognito window to ensure it wasn't something with cookies or browser cache. The AWS Service Health Dasboard doesn't indicate any issues with the console in eu-west-1.", "Title": "Unable to access the VPC console in eu-west-1", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232808&tstart=100"}{"Answers": {"usr-1": ["Hi, I've created a new Default VPC for you. Please confirm that you can see on your end. Regards, Arun T."], "usr-2": ["Hi Arun, I can, thank you! Much appreciated. Kind regards, Kyle"]}, "Question": "Hi, Could I please have some assistance in recreating my default VPC? I deleted it and didn't realise it required staff intervention to get back. Thank you in advance. Kind regards, Kyle Edited by: Kyle on Jun 3, 2016 6:11 AM", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=232911&tstart=100"}{"Answers": {"usr-1": ["Hello, your default VPC for eu-west-1 AWS region has been successfully re-created. Kind Regards Ale"]}, "Question": "Hi, My Default VPC has been deleted in error. Can this please be re-created in EU West (Ireland) eu-west-1 Thank you", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=233107&tstart=100"}{"Answers": {"usr-1": ["I got it working, I think. Did a new VPC from scratch and created new ENI and assigned it and this time it worked. Must've missed something previously..."]}, "Question": "Apologies, not sure if this is an EC2 or VPC question: I have an openwrt VM running, that I would like to use as a VPN terminator (for OpenVPN, so can't use an AWS provided VPN Gateway) between various remote locations and the VPC. This is my first go at cloud-based networks, I'm used to having a WAN interface, and 1-2 LAN interfaces which I can stick my servers behind. When I go through the UI to create a new EC2 instance based on my AMI, I have assigned 2 network interfaces, one for WAN (eth0?) and one for LAN (eth1?). However the instance isn't getting a WAN IP; I don't think DHCP is working for eth0 anymore? (It works fine if I start the AMI with just 1 NIC). I have associated an Elastic IP with the VPC Subnet that I assigned to eth0. But it still doesn't appear to find a lease (I can only assume as cannot get onto the box without internet access). Using us-east-1e. Instance i-0642a4eb43313ee28, vpc-7e6dcf19, vpc-7e6dcf19, eni-0a3de634", "Title": "How to set up multiple LANs on a EC2 in a VPC?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=233524&tstart=100"}{"Answers": {"usr-1": ["Hello Thameem, I have set your subnet 'subnet-bcdda096' as default subnet. I hope this help and please let us know if you have any other request."], "usr-2": ["Thank much, Jerry!"]}, "Question": "Hello AWS Team, Accidentally I have deleted the default subnet in my VPC, can you please set this 'subnet-bcdda096 | sn-public-a' as default subnet? Please let me know if you need any additional info. -Thameem", "Title": "Make subnet default", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=233360&tstart=100"}{"Answers": {"usr-1": ["Hello, Thank you for reaching out to us. The default VPC in us-west-2 has been restored. Regards Masudur Rahaman Sayem"]}, "Question": "Hi, could you restore my default VPC in us-west-2 please? Thx!", "Title": "Restore default VPC req", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=233500&tstart=100"}{"Answers": {"usr-1": ["Seems to be working now."], "usr-2": ["Seems to be working now."]}, "Question": "Hi, I just set up an AWS account so that I can get a RDS going. I have been following this guide: http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_SettingUp.html I am at the point where I need to create a VPC Security Group, but I cannot. The dashboard briefly shows and then I always get this message: 'You must sign up for Amazon VPC before you can use the Amazon VPC Console. It's quick and free to sign up, just click the button below.' If I am logged in as the IAM User, when I click the button it just redirects me to the console. When I am logged in as the root user, I see this message: 'Thank you for updating your Amazon Web Services (AWS) subscription. Your management console will now be up to date with all AWS services.' But get the same error and signup prompt the next time I try to access VPC. Any help would be greatly appreciated. Thanks.", "Title": "Cannot Access VPC or Update Subscription", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=233783&tstart=100"}{"Answers": {"usr-1": ["Hello Manish, I have checked your default VPC and I can confirm that you already have default VPC on us-east-1 region. Please let me know if you need to restore default VPC on other region."], "usr-2": ["Thank you very much Jerry."]}, "Question": "Hi Guys, Please recreate a default VPC for me in the region 'US East (N. Virginia)'. Please let me know if you would require additional information to be able to do so or if there's another door which I should knock. Thanks very much", "Title": "Recreate default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=233757&tstart=100"}{"Answers": {"usr-1": ["Hi Alessandro, It looks like the VPC vpc-23947e47 is associated with your account. When you start your instance, it will be a part of the VPC, it was associated when the instance was launched. Regards, Aishwarya"], "usr-2": ["Hello, I have not explained, probably. More explicitly: can you recreate the default VPC of my account, please? Thanks, -A-"], "usr-3": ["Ok, now I'm ready: I have resetted all my account configuration. Can you set my vpc-xxx as default? Thank you."], "usr-4": ["ok no problem for now."]}, "Question": "Hi, I have to make a VPC-peering between two default-VPC (of two AWS-accounts). But my new account have an identical CIDR.. The two accounts and relative default VPCs are: 1) default vpc-xxxxxxxxx (172.31.0.0/16) 2) default vpc-23947e47 (172.31.0.0/16) (my new account) I actually have one instance stopped. Can you reset the second VPC so that can be peered with the first one? It will be automagically associated with my stopped instance? Thank you very mutch. Alessandro Ferrarin", "Title": "Please recreate my default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=233860&tstart=100"}{"Answers": {"usr-1": ["the problem has become very critical. Network connectivity was lost again. We had an outage at 8:30 UTC."], "usr-2": ["Hello, I apologize you are facing an issue with your instance. I just took a look at your instance. It looks like status checks failed earlier today at around 2016-06-22T08:25Z. I took a look at the CPU Utilization during this time period and it had hit a spike. It looks like the high CPUUtilization caused these status checks. Currently I see the instance is passing all checks and is running without the CPU being maxed out. I would recommend using SYSSTAT going forward to monitor your processes. You can find more information regarding this tool in the below link: http://sebastien.godard.pagesperso-orange.fr/documentation.html Thanks, Anup"], "usr-3": ["thank you Anup I do see a CPU Utilization spike goes up to 88%. I find it very untypical, and unexpected, when system loses network connection because of such a short, low spike. I will install sysstat and see if it helps to identify the problematic process."], "usr-4": ["We changed instance type from m4.large to t2.large let's see if it helps"], "usr-5": ["after changing to t2, the problem has gone."]}, "Question": "Hi, One of our critical production instance started to experience network connectivity issues. Before it was running 24/7 for months, but in last 2 weeks we experienced 3-4 network outages 7-15 minutes long. region: frankfurt instance: i-0344d949703a56cbd instance type: m4.large instance runs in VPC with associated elastic IP last outage: 2016-06-21 02:45:28 UTC - 2016-06-21 03:01:39 UTC Instance has ubuntu, proftpd, java, awslogs agent running. ftp log shows: login timeouts java log shows: No route to host awslogs: delivered with a delay system log: does not show anything interesting Status Check Failed (instance): true CPU utilization: normal, drops during outage because instance has nothing to do Last Saturday we have made a new AMI and relaunched the instance hoping to get rid of the problems, but today the problem returned. We need AWS help to resolve this issue.", "Title": "Instance loses network - Status check failed", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=233952&tstart=100"}{"Answers": {"usr-1": ["Hi, I am afraid is it not possible to convert an existing VPC into a default VPC. We can only recreate a default VPC for you. I have recreated a new default VPC for you. New default VPC ID is vpc-4fcf192b. Regards, Souza S"], "usr-2": ["Thank you, for the creation of the new default vpc, but I forget to ask that the new default VPC should be created on a different CIDR: 172.32.0.0/16 or 172.30.0.0/16 Can you delete the actual default vpc-4fcf192b and create a new one having different CIDR? Thank you"], "usr-3": ["Thank you, for the creation of the new default vpc, but I forget to ask you that the new default VPC should be created on a different CIDR: ex. 172.32.0.0/16 or 172.30.0.0/16 Can you delete the actual default vpc-4fcf192b and create a new one having different CIDR? Thank you Edited by: alferx on Jun 23, 2016 7:01 AM"], "usr-4": ["Hi, Unfortunately, we cannot create the default VPC with a different CIDR. All the default VPCs created have a CIDR block of 172.31.0.0/16. Regards, Pavithra K"]}, "Question": "Please make vpc-9b0ddaff my default VPC.", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=234046&tstart=100"}{"Answers": {"usr-1": ["Hi, As per the documentation, the instance will NOT connect to the internet if it's placed in teh subnet an doesn't have an EIP/public IP. In order to have the instance connect to the internet from the public subnet, will need a public IP or an EIP. In the scenario mentioned in the documentation, it is mentioned that the web servers are given EIPs. However, if you want to have the instances in the private subnet connect to the internet, you would need to associate your private subnets with your main route table in which the default traffic would go to NAT. In this case, you will not require a public or an EIP. So in your case, if you want your instances without public/EIP to reach to the internet, you need to launch them in your private subnets and make sure the private subnets are associated with the main route table in which the default route is \"0.0.0.0/0 nat1 Active No \". I hope this answers your question. Anup"], "usr-2": ["First, thank u for response my question. If i want instance in public subnet to connect internet. how could i do to tuning the network acl or route table? In my case, my instances behind elb + autoscaling in public subnet and those instance must connect to db in private hq. So the firewall be set to allow certain ip / domain to connect db in private HQ. The instance behind elb + autoscaling nust be set eip / public ip for connect to internet. But i can't know the ip of scaling up instance. I can't set FW in advance. How could i do?"]}, "Question": "i follow the aws document to create a vpc scenario 2-like env. ( http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Scenario2.html ) According to this, the instance in public subnet should connect internet without EIP/Public ip. But if the instance without EIP or public ip in public subnet, it can't connect to internet. the following are some setting of my vpc. Subnets 2 public subnets (172.22.10.0/25 172.22.10.128/25) and 2 private subnets(172.22.11.0/25 172.22.10.128/25). Route table - custom table 172.22.0.0/16 local Active No xxx.s3 vpce-xxx Active No 0.0.0.0/0 igw1 Active No 'subnet association' includes 2 public subnets no route propagation - main table 172.22.0.0/16 local Active No xxx.s3 vpce-xxx Active No 0.0.0.0/0 nat1 Active No 'subnet association' includes nothing. no route propagation Internet gateways igw1 attaches to my vpc. Nat Gateways nat1 gateways with an EIP and applied web security group(called web-sg). Network ACL - inbound 100 ALL Traffic ALL ALL 0.0.0.0/0 ALLOW ALL Traffic ALL ALL 0.0.0.0/0 DENY - outbound 100 ALL Traffic ALL ALL 0.0.0.0/0 ALLOW ALL Traffic ALL ALL 0.0.0.0/0 DENY subnet association includes 4 subnets web-sg - inbound no effect my problem - outbound ALL Traffic ALL ALL 0.0.0.0/0 The instance is fixed ip by assigned ip in network interface in public subnet. i put eth0 content here, because i don't know whether it effect this issue. DEVICE='eth0' BOOTPROTO='dhcp' IPV6INIT='yes' MTU='1500' NM_CONTROLLED='yes' ONBOOT='yes' TYPE='Ethernet' UUID='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' Anyone know what's happened in this case? And how could i do?", "Title": "vpc public subnet instance can't connect internet. (NO EIP/public ip)", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=234055&tstart=100"}{"Answers": {"usr-1": ["jschaefer, I use this method allow my IP and denied all, is safe, but thinking on security all can fail. You can add more security layer and encrypt your traffic (e.q. ipsec), if somebody catch your traffic will be more difficult read your data. Best Regards, Danilo Alves Edited by: DaniloHAlves on Jul 1, 2016 3:52 PM"]}, "Question": "Hi, My company have a network with a fixed IP address/IP address range. Is it save when I configure my Security group that all traffic from this IP address will be accepted and everything else will be blocked? Especially, is it possible that someone fake my address and gets access to all the open ports on my system? Regards, Johannes.", "Title": "Secure configuration via IP access list", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=234215&tstart=100"}{"Answers": {"usr-1": ["It seems like the problem may be related to installing a proxy server on the machine. I have repeated the installation with a new instance, and the instance became unavailable via RDP during the proxy installation (I am using MS TMG) process. I tried to put a machine in the same LAN as the above instance, and still could not get an access (nor ping) once the proxy is installed. Any idea how to overcome this ?"], "usr-2": ["I found one solution at https://forums.aws.amazon.com/thread.jspa?threadID=123523 Had no luck \u2013 disabling the offload settings did not help. However, a nice post at https://cloudbusterspodcast.wordpress.com/2011/10/22/installing-microsoft-forefront-threat-mitigation-gateway-tmg-into-amazon-aws/ did the trick"], "usr-3": ["Hi, I see that the instance in question has since been terminated. From what you said it does look like the proxy installation is the root cause. The recommended work around is to launch a new instance from the latest backup AMI or snapshot. Regards, Souza S"]}, "Question": "Hi, I can't RDP to my instance i-04ac30040a222d6da . external port scanning shows me that the port is filtered (not closed). It use to work just fine, but suddenly I can't connect to it. RDP port on security group is allowed, status checks are fine, I have an IGW configured. Please assist, what am I missing ? Edited by: wanthony on Nov 23, 2016 5:09 AM", "Title": "Can\u2019t RDP to VPC instance", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243653&tstart=25"}{"Answers": {"usr-1": ["Hi, We have marked your subnet - subnet-925500e4 as default subnet for the VPC. Hope this helps. Have a great day ahead. Regards, Jayakrishnan L."], "usr-2": ["awesome, thanks a lot !"]}, "Question": "Hello I deleted my default subnet for my default VPC but can't recreate it, and now I can't create new EC2 instances Is it possible to set my new subnet to default (eu-west-1c) ? Thanks", "Title": "Default subnet", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243813&tstart=25"}{"Answers": {"usr-1": ["Hi, You need to make use of Passive FTP configuration to work this out. Can you make you are using passive connection in your clients? I would also like to advise you to make use of SFTP instead of VSFTPD. SFTP is secure and easy to implement. Regards, Jayakrishnan L."], "usr-2": ["Thanks, finally there was a bad configuration of ftp server. Is working now."]}, "Question": "Hi, I have a problem to transfer files across VSFTP config in my EC2 instance into VPC. I have a Centos AIM with local ip 172.30.0.24 I have a Elastic IP asigned to my Centos 54.55.99.77 I config VSFTPD.conf as: pasv_enable=YES pasv_min_port=12000 pasv_max_port=12100 port_enable=YES pasv_address=54.55.99.77 pasv_addr_resolve=YES seccomp_sandbox=NO And I configure Secure group like: Custom TCP Rule TCP 12000 - 12100 0.0.0.0/0 Custom TCP Rule TCP 20 - 21 0.0.0.0/0 Sice my ftp client, I can connect, but I can\u00b4t tranfer files. I try with 2 o 3 ftp clients with similars errors: vsftpd 'Server sent passive reply with unroutable address.' Some idea what\u00b4s the problem? Thanks!", "Title": "Problem Passv Mode VSFTP on EC2 instance into VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=243903&tstart=25"}{"Answers": {"usr-1": ["Hi redr0bin, We've recreated your default VPC for the eu-central-1 region. Regards, Dominic"], "usr-2": ["Thank you!"]}, "Question": "Hello, accidentally deleted my default vpc in eu-central-1, can not build custom ami with packer. What should I do now to recreate default vpc for this region ? Thanks", "Title": "recreate default vpc", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244084&tstart=25"}{"Answers": {"usr-1": ["Hello, The diagram shown assumed that the AWS endpoints would share the same IPs. However much more often than not, you're going to have endpoints with entirely different IPs. So for example: VPN Connection 1: Customer Gateway - x.x.x.1 (Your public IP) AWS Endpoint 1 - 54.200.100.1 AWS Endpoint 2 - 54.200.100.2 \u00a0 VPN Connection 2: Customer Gateway - x.x.x.2 (Your public IP) AWS Endpoint 1 - 54.200.100.3 AWS Endpoint 2 - 54.200.100.4 For this reason, you're not ever going to have that crossover achieved, however the same reliability is achieved. Regards, Nick"], "usr-2": ["thank you for your answer"]}, "Question": "Hi all, We have configured a transit VPC with 2 Cisco CSR and now every new VPC created that wants to connect with us creates a VPN Connection that goes to our Transit VPC. once you create the VPN Connection pointing the Elastic IP of our TRANSIT CSRs the downloadable template shows 2 tunnels going to the same Elastic IP. what we want to achive is to cross the secondary tunnels between as shown in the jpg(marked with the black circle) i attach. and im not able to do it, the primary tunnels are established and working but I dont know how to cross them thanks in advance and Regards Edited by: SteCu on Dec 2, 2016 4:34 AM", "Title": "VPN connection Split tunnel (TRANSIT VPC)", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244166&tstart=25"}{"Answers": {"usr-1": ["Found that the AWS CLI will be able to do what I need via EC2 service in the CLI. http://docs.aws.amazon.com/cli/latest/reference/ec2/create-network-acl-entry.html"]}, "Question": "Hello, I would like to add a list of blacklisted IP's to my VPC's ACL Inbound rules (~800). Currently the console does not provide an easy way to batch import a list (unless I'm missing it) and typing in each manually would take a really long time. I am fine with creating something using the AWS SDK but can't seem to find anything related to ACL management in the SDK outside of changing permissions to S3 ACL objects. Does anyone know if it's possible to modify VPC's ACL Inbound rules with the AWS SDK? Thank you", "Title": "Can you maintain the network ACL for VPC with the AWS SDK?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244227&tstart=25"}{"Answers": {"usr-1": ["Hello, Thank you for contacting us. I have re-created the default VPC vpc-6a13dd0c in the us-east-1 region. Best regards, Karan S."], "usr-2": ["Hello, I deleted my default VPC, didn't realize I wouldn't be able to recreate it. Could I have some help with recreating it? The region is US East (N. Virginia)"], "usr-3": ["Please ignore above message"]}, "Question": "It appears to have been deleted, please recreate in US-EAST-1. Thanks!", "Title": "Need default vpc recreated", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244360&tstart=25"}{"Answers": {"usr-1": ["Hello, As mentioned in the following documentation DB Subnet Groups are required to have two AZs in them: http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_VPC.WorkingWithRDSInstanceinaVPC.html#USER_VPC.Subnets Control over which AZ is used by which subnet is decided on creation of the subnet as detailed here: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html Regards, Nick"], "usr-2": ["Hi Nick, Thanks for that, whilst 3 subnets existed in the VPC, 1 per AZ, the RDS DB Subnet Group (default) only had 1 listed. I added the other 2 and it is working now. Thanks, Ric"]}, "Question": "I am trying to create a single AZ RDS instance but am receiving the following: 'DB Subnet Group doesn't meet availability zone coverage requirement. Please add subnets to cover at least 2 availability zones. Current coverage: 1 (Service: AmazonRDS; Status Code: 400; Error Code: InvalidVPCNetworkStateFault; Request ID: 5a97b542-bbc2-11e6-8b5a-0f1bb3a68b21)' I believe this is because 2 of my 3 subnets are set to Default=No but I cannot find a way to change this, any ideas?", "Title": "Default Subnet 'No' Causing RDS Creation Issue", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244445&tstart=25"}{"Answers": {"usr-1": ["Hello, If you do not want any resources in your DMZ subnets to have access to on-premise, then yes, not enabling route propagation on those subnets would be best. Additionally you could use network ACLs, security groups, and your own firewall's controls to filter this traffic as well. Regards, Nick"]}, "Question": "I was just working on a new production VPC. Hybrid Cloud setup to my on-premises data center. After finishing up the site to site VPN connection, I was about to enable Route Propagation on the Route Tables but then that got me thinking. I shouldn't enable route propagation on the route table that is associated with the two DMZ subnets. That would allow the DMZ subnets to access my on-premises data center which would negate the point of having a DMZ. Am I thinking about this correctly? For security reasons, I would not want my DMZ to access my data center.", "Title": "Enable Route Propagation on Route Table Associated with the DMZ?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244503&tstart=25"}{"Answers": {"usr-1": ["Fixed it myself"]}, "Question": "I set up a hardware based VPN from AWS to our firewall using the generic config. I used AWS documentation as well as documentation from our firewall. All seems well as I can RDP to the Amazon EC2 and can RDP from Amazon back to a machine on-premise. However I cannot PING or SSH. This all sounds to me like security groups, firewalls, etc. I've checked all of that and all seems ok. Also I would think if RDP works that the routing is set up correctly. I'm at a loss. Using a Watchguard Firewall. Using 172.31.0.0/16 private addresses at VPC. My static route is set up on the Watchguard to route all 172.31.0.0/16 traffic to the AWS tunnel IP. I can see in my firewall traffic logs that RDP and for instance SMB is being allowed when I even try SMB. So my firewall is not stopping it. UPDATE: I can ping/tracert and SMB (connect to a share) from an EC2 instance to a machine on premise fine however. It seems ping/tracert and SMB don't work from on-premise (RDP does) but the reverse works. UPDATE 2: looks like firewalls on EC2 instances and additionally I forgot I had a restrictive ACL set up at AWS. Edited by: sammyd on Dec 8, 2016 2:15 PM", "Title": "Nothing other than RDP over VPN", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244647&tstart=25"}{"Answers": {"usr-1": ["Hello, CloudTrail does exactly this, as it logs all API calls made to your account. You can read more on CloudTrail here: http://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-user-guide.html Regards, Nick"]}, "Question": "I am looking for a way to listen to all admin activities such as subnet creation Elastic IP creation or any admin change for that matter. Is this currently possible?", "Title": "Is there a way we can listen to admin events such as subnet creation?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244715&tstart=25"}{"Answers": {"usr-1": ["its done. needed to point the route table to the VGW Edited by: SteCu on Dec 19, 2016 1:27 AM"]}, "Question": "hi guys, We have a transit VPC with a Cisco CSR 1000V, right now we have bought a Direct Connect from BT and we have recieved the connection in our AWS portal and now we dont know how to connect that direct connect to our cisco CSR 1000V. in the documentation the info says we need to create a Virtual private Gateway to finish the VIF. but how do i interconnect the cisco CSR with that virtual private gateway to give the direct connect connection? Regards Edited by: SteCu on Dec 13, 2016 7:55 AM Edited by: SteCu on Dec 14, 2016 12:49 AM uploaded a picture , what we need to knwo is how ti interconnect the Virtual private gateway with the cisco csr", "Title": "Transit VPC problems", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=244940&tstart=25"}{"Answers": {"usr-1": ["Hi, We do not have Elastic IP support for IPv6, yet. Please look out for any updates on https://aws.amazon.com/new/. Thanks, Selva"], "usr-2": ["Thank you for taking the time to reply to this enquiry, which is much appreciated. Presumably from your reply AWS is intending to provide IPv6 EIPs at some point in the future. Do you have any sort of IPv6 roadmap which would your customers assist in understanding how you hope (without promising) to develop the use of IP6? With many thanks. Best wishes, Matthew ps: there are a couple of other IPv6 enquiries (from other customers) in this forum and I am sure that they would also appreciate feedback from AWS..."], "usr-3": ["Unfortunately, we do not have a public roadmap for IPv6 to share. I do know the team is as excited as you to get IPv6 launched, and they'll be working on additional features in the future. Let us know if you have any other questions in the meantime. Best regards, David B."]}, "Question": "Firstly, what a delight to see IPv6 becomming available!!! Having read the documentation and had a play, I am wondering whether one can use IPv6 in the same way as one can use an IPv4 Elastic IP. For example one might allocate an EIP and then associate it with an instance in AZ1. Having a standby instance in AZ2, were there to be a fault with AZ1 or the instance in it, the EIP could be re-associated to the instance in AZ2 and things could simply continue. Is there a method to be able to move an IPv6 address between instances in different AZs? If not, are there any suggestions as to how to achieve the above? With many thanks. Best wishes, Matthew", "Title": "IPv6 Elasticity across AZs", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=245011&tstart=25"}{"Answers": {"usr-1": ["HI There, I have created a Default VPC (vpc-97ec48f0) for your on Region us-west-2. I can see that you do not have any rDNS set on your EIPs. What error are you getting when you try to release the EIPs mentioned? Regards, Jayakrishnan L."], "usr-2": ["Thank you so much your help, you can help me reset the default settings of the Elastic IPs I want to delete it, but I can't Thank you"], "usr-3": ["Hi, Please use the instructions mentioned in link [1] on how to release EIP from you account . Once released the EIP will be no longer associated to your account. Also before releasing the EIP please make sure it not associated with any instance and if it is please dis-associate the address by following the instruction under link [2]. Also please let us know what error message are you getting when releasing the EIP. [1] http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#using-instance-addressing-eips-releasing [2] http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#using-instance-addressing-eips-associating-different"]}, "Question": "I can't delete VPC elastic IP eipalloc-b1a3e8d6 and eipalloc-d56dacb2 Please make my VPC default and delete VPC elastic IP, Thank you", "Title": "Can't delete VPC elastic IP", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=245377&tstart=25"}{"Answers": {"usr-1": ["Hello Pon, I have re-created default VPC on ap-northeast-1 region. I hope this help."], "usr-2": ["Hello, I deleted my default VPC, didn't realize I wouldn't be able to recreate it. Could I have some help with recreating it? The region is US East (N. Virginia)"], "usr-3": ["Hello srinivas0009@. Ihave recreated your default VPC for us-east-1. Can you please verify? Najah"], "usr-4": ["Me too. Unaware of the consequences, I deleted the default VPC in us-east-1. Please restore."], "usr-5": ["Hi, I have re-created default VPC on us-east-1 region. I hope this helps."], "usr-6": ["Hi I have accidentally deleted my default VPC in US-East N Virgnia (us-east-1a). Can you please create one for me. Thanks for your help Thanks vaidyabala@hotmail.com Edited by: Amazon Customer on Mar 19, 2017 6:41 PM"], "usr-7": ["Hi Any help you can give creating my default vpc. I am not able to test auto scaling group as it says I need default vpc. I accidentally deleted mine. Thanks for you help vaidyabala"], "usr-8": ["Mr Umesh Can you please help me also to create default VPC? thanks vaidyabala"]}, "Question": "Hello. I've deleted my default VPC. Please recreate my default VPC. The region is Asia Pacific (Tokyo). Thank you, Pon", "Title": "Deleted default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=245126&tstart=25"}{"Answers": {"usr-1": ["That rule opens up for traffic between all instances who share that security group. Since your instances in the private subnet have a different security group according to your post, those would not be allowed to access the Internet through the NAT instance. They won't get through. You would need a second security group rule allowing traffic from the security group used by your private subnet instances."]}, "Question": "Hi, I was playing around and happened to create a NAT instance as well as public-private subnets all inside one VPC. All this was done via the subnet and VPC creation wizards. This exercise is a part of the Qwiklabs self-paced lab - 'Building Your First Amazon Virtual Private Cloud (VPC) for Solutions Architect - Associate certification The NAT instance is in the public subnet. The inbound rule for NAT instance's security group is as follows: All traffic | All | All | <security_group> The value of <security_group> is the same as the one assigned to my NAT instance. In this case, how are instances in the private subnet (having different sec group) able to interact with this NAT instance? I know that's the expected behavior - NAT instances are specifically designed for machines in private subnets to talk to the outside world. But with only this one inbound rule in the NAT's security group, how is it accomplished?", "Title": "How is my NAT able to restrict connections to ones from private subnet?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=246202&tstart=25"}{"Answers": {"usr-1": ["Hello, I have created Default VPC - vpc-fbd68a9f on your eu-west-1 Region. Hope it helps. Regards, Jayakrishnan L"], "usr-2": ["Thanks!"]}, "Question": "Hi, I've not been the smartest person and deleted my default VPC (EU West), would it be possible to restore this? Kind regard and happy new year", "Title": "Restore default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=246343&tstart=25"}{"Answers": {"usr-1": ["You are never charged for the VPC itself, only the resources you have inside it. That can include EC2 instances and Elastic IPs for example. A public hosted zone in Route 53 does not depend on the VPC, but your EC2 instances and other associated resources like the IP addresses certainly do. It's kind of your own area or container that these are placed inside. You are either using a \"Default VPC\" that was available out of the box, or you explicitly created a VPC at some point. But no matter how you ended up with the VPC, it's not the VPC itself that is generating charges. Your (perhaps preliminary) bill in the Billing Management Console will show exactly what you are paying for. So VPC is necessary because you have EC2 instances - not because of Route 53."], "usr-2": ["Hi there, and many thanks for your response. I will certainly not delete the VPC! However, re your comment that I am not charged for the VPC itself: In December I did not actually have any of my instances running, so there were no charges for compute time. There were only charges for EBS and snapshots etc and for non-connected Elastic IP addresses. BUT, in the VPC area there was a charge for: $0.05 per VPN Connection-Hour 744 Hrs 37.20 That's the one I am seeking to avoid. I am pretty sure I never had a VPC originally. I wonder whether I actually need this VPN Connection? Thanks again."], "usr-3": ["PaulR wrote: BUT, in the VPC area there was a charge for: $0.05 per VPN Connection-Hour 744 Hrs 37.20 That's a secure connection between the VPC and a VPN capable device at your end (office or data center for example). It's a completely optional feature, which isn't needed for the basic operation of the VPC itself. The VPN makes it possible to communicate internally between the two networks (local and AWS VPC) in a secure fashion. For example, it allows you to use private IP addressing when you access EC2 instances from your premises (as opposed to Elastic IPs that are public). In the VPC Management Console, you'll find the relevant configuration under the \"VPN Connections\" header. \"Customer Gateways\" shows information about the device on your end, while \"Virtual Private Gateways\" refer to the virtual VPN device on the AWS side. \"VPN Connections\" has information about the connection between these two. You are being charged by the hour as long as the VPN connection exists. It doesn't matter if the VPN is actually in use. If you have configured a VPN by mistake, delete the VPN connection to stop these charges. The Customer Gateway and the Virtual Private Gateway can optionally be removed as well, but they have no impact on your bill."]}, "Question": "I set up Route53 in order to create a logical name that would translate to an actual IP address. This was so that I could move to a different IP address later if needed. HOWEVER, I also see that I have set up a VPC for some reason and I am getting billed for it. I can't recall why this was set up, and the name I allocated to it it bears no relationship to the Route53-based system. I don't see any ongoing need for it unless it is a vital component of Route53. VPC and Route53 are in the same area of AWS Services in the console, so this makes me wonder. Dumb question, therefore: Is VPC necessary if all I want is Route 53 please? I am a real novice in this area, so I am scared to just nuke my otherwise-unneeded VPC. The VPC is not being used for anything (else) as far as I can see. Added question: As I say, I have NO idea now why I created the VPC. However, I see all my EC2 instances and my Elastic IPs seem to show up there. If I nuke the VPC, will it also lose all my instances and Elastic IPs? Thanks! Edited by: PaulR on Jan 5, 2017 3:52 PM", "Title": "Is VPC necessary for Route53", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=246511&tstart=25"}{"Answers": {"usr-1": ["Hi, I can see that the default network on eu-west-1 for your account - 50XXXXXXXX50741178489191 is EC2-Classic. That's why you do not have a Default VPC in eu-west-1. The simplest way to get a default VPC is to create a new account in a region that is enabled for default VPCs. If you want to create a Default VPC on your existing account, you need to make your account (for region eu-west-1) 'VPC Only'. We can only enable an existing account for a default VPC if you have no EC2-Classic resources for that account in that region. Additionally, you must terminate all non-VPC provisioned Elastic Load Balancers, Amazon RDS, Amazon ElastiCache, and Amazon Redshift resources in that region. After your account has been configured for a default VPC, all future resource launches, including instances launched via Auto Scaling, will be placed in your default VPC. You will not able able to use the EC2 Classic network any more on the region. You can read more about this on our documentation http://aws.amazon.com/vpc/faqs/#Default_VPCs. To request your existing account be setup with a Default VPC, contact https://aws.amazon.com/contact-us/. We will review your request and your existing AWS services and EC2-Classic presence to determine if you are eligible for a default VPC. Regards, Jayakrishnan L"], "usr-2": ["Ok, I understand better now. Thanks for your help"]}, "Question": "Hi AWS support I don't seem to have default VPCs anywhere Could you please create them? Thanks", "Title": "Create default VPCs", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=246567&tstart=25"}{"Answers": {}, "Question": "Hi, I am sorry I thought I could change the VPC Region I am located in Japan but instad I deleted my default VPC , would it be possible to restore it please or recreate in Tokyo Region ? Once again so sorry for the trouble Kind regard and happy new year", "Title": "Default VPC Trouble please advice", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=246612&tstart=25"}{"Answers": {"usr-1": ["Hello, We have recreated your default VPC on us-east-1. I hope this help."]}, "Question": "Hi! Could you re-create my default VPC in the us-east-1 region? TIA", "Title": "Please re-create my default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=247076&tstart=25"}{"Answers": {"usr-1": ["OK... I made a big long post that took forever then I got to looking and I found the problem. The inbound rules for the security group should have had 0.0.0.0/0 but instead it had something else. I ended up clearing and not figuring out what it actually was pointing to, but it looks like it might have been the Internet Gateway... the current one or an old one."]}, "Question": "I have decided to do some development with IPv6 so I choose the Ohio geographical area. My current server in the Virginia geographical area works well and has no problems. I have tried a few different instances started from different AMIs including the community made Debian, official Amazon linux, official Redhat, and the official Unbuntu. I did this to try my best to ensure that the Linux system was not simply responding to IPv4 ICMP and IPv4/TCP data. My VPC consists of one sub-net located in Ohio under availability zone us-east-b2. The IPv4 address range internal to this sub-net is 172.31.0.0/16 and the IPv6 range is 2600:1f16:5f0:2100::/64. The explicit route table contains the following entries: 172.31.0.0/16 => local => active 2600:1f16:5f0:2100::/56 => local => active 0.0.0.0/0 => igw-5fb87436 => active The network interface uses the availability zone us-east-b2 under the geographical area of Ohio and has a primary private IPv4 address of 172.31.251.216 and uses an elastic public IPv4 address of 52.14.52.255 which is associated with the private primary address 172.31.251.216. This should allow the Internet Gateway to translate packets headed to 52.14.52.255 into the destination 172.31.251.216 and vice versa. The VPC ID also matches and it is the only VPC I have for the Ohio geographical area. My inbound security policy is ANY protocol ANY port and ANY source address. The ACL under the VPC results in ALLOW entries for all inbound and outbound traffic. The current instance ID is i-0ed62cbf65ffef3e9. I have worked for a few hours trying various configurations and changes. I was at first not including a route to the Internet Gateway, but at this point I have run out of things to try. If anyone has any suggestions then I would love to try it! I do not mind if the suggestion is incorrect as I am literally stuck at this point. I rarely ever post for help, but.... well... I really have become stuck. I also spent some time reading the documentation for Internet Gateways, Routes, Virtual Private Clouds, Network Interfaces, NATs, and about anything I could find to try to spur some idea of something to change or tweak. This is what I see from my local computer on Windows: C:\\Users\\kmcguire\\OpenVPN\\config>ping 52.14.52.255 Pinging 52.14.52.255 with 32 bytes of data: Request timed out. Request timed out. C:\\Users\\kmcguire\\OpenVPN\\config>ping google.com Pinging google.com http://216.58.217.238 with 32 bytes of data: Reply from 216.58.217.238: bytes=32 time=22ms TTL=52 C:\\Users\\kmcguire\\OpenVPN\\config>ping kmcg3413.net (Amazon EC2 Virginia Based Instance) Pinging kmcg3413.net http://52.86.189.52 with 32 bytes of data: Reply from 52.86.189.52: bytes=32 time=33ms TTL=46 The Amazon EC2 Virginia Based Instances shows 100\\% packet loss when pinging the address 52.14.52.255 and any TCP connection to for example port 22 results in a timeout.", "Title": "EC2 VPC IPV4 OHIO US-EAST-2B: Connectivity Problem; Will appreciate ideas.", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=247087&tstart=25"}{"Answers": {}, "Question": "We've been experiencing Networking / Routing issues with our VPC (vpc-9b335afc) today. We're on our 2nd outage for the day. Last time, we had issues from around 9:45am ET to 10:40am ET. This started around 12:18pm ET.", "Title": "VPC Networking / Routing Issues", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=247228&tstart=25"}{"Answers": {"usr-1": ["Ok, so my main problem was with AWS - it doesn't allow to route traffic between EC2 instances by default. To fix this moment one should disable http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_NAT_Instance.html#EIP_Disable_SrcDestCheck for your \"gateway\" instance. After that adding a route into the AWS route table which redirects all your office-targeted traffic to your \"gateway\" ec2 instance (e.g. 172.20.0.0/16 -> eni-XXX - where eni-XXX is an id of gateway's interface) works fine. As for forwarding traffic from the public network interface (eth0) to the OpenVpn virtual network interface, iptables solves this very easy: iptables -F iptables -t nat -F \u00a0 iptables -t nat -A POSTROUTING --out-interface tun0 -j MASQUERADE iptables -A FORWARD -i eth0 -s 10.0.0.0/16 -d 172.20.0.0/16 -o tun0 -j ACCEPT where \"10.0.0.0/16\" is VPC sub-network and \"172.20.0.0/16\" is the office network. Plus, enabling IP forwarding, of course: echo 1 > /proc/sys/net/ipv4/ip_forward vim /etc/sysctl.conf <- net.ipv4.ip_forward = 1 Thanks everyone for your replies."]}, "Question": "Hello! I'm trying to build a VPN gateway from my -VPC -> into the office network. I've successfully set up a VPN client on one of my EC2 instances (let's name it 'gateway') and now it has VPN virtual interface 'tun0'. Now I want to route all office-related traffic (dst 172.20.0.0/16) from the rest of EC2 instances in the VPC to 'gateway''s network interface (10.0.0.100). I've tried 2 different approaches: - add a new rule into the related AWS Route Table: 172.20.0.0/16 -> eni-XXX (where eni-XXX is an id of 'gateway''s interface); - update EC2's route table: route add -net 172.20.0.0 netmask 255.255.0.0 gw 10.0.0.100 Both variants seem to be failed because running 'tcpdump -i eth0 'src port not 22 and dst port not 22'' on the gateway and curling/pinging internal office ips shows nothing Does anyone have an idea about what's wrong? Or may be has a batter solution for my problem? And the second question. Once I get my traffic on gateway's eth0, I plan to forward it into the VPN connection using the following IpTables commands: iptables -t nat -A POSTROUTING -o tun0 -j MASQUERADE iptables -A FORWARD -i eth0 -s 10.0.0.0/16 -o tun0 -j ACCEPT iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT Should I expect any problems here (except enabling ip forwarding)?", "Title": "VPN from AWS into Office", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=247440&tstart=25"}{"Answers": {"usr-1": ["This has been taken care. Don't need this anymore. Thank you."]}, "Question": "Hello, Could you please create a default VPC in us-east-1, us-east-2 and us-west-2 for me? Thank you !", "Title": "Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=252840&tstart=0"}{"Answers": {"usr-1": ["Resolved in support."]}, "Question": "Please recreate default VPC and subnet. Account ID: 299248716051 Region: ap-northeast-1", "Title": "Default VPC Creation Request", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=250940&tstart=0"}{"Answers": {"usr-1": ["Hi I see that the default VPC in the us-west-2 and ap-south-1 region was deleted. I have created a default VPC \"vpc-0cccbc6b\" and \"vpc-3e73e557\" for you. With this default VPC, the following things were also created in the us-west-2 and ap-south-1: -Default subnet in each Availability Zone. -Internet gateway and connected it to your default VPC. -Main route table for your default VPC with a rule that sends all traffic destined for the Internet to the Internet gateway. -Default security group and associated it with your default VPC. -Default network access control list (ACL) and associated it with your default VPC. -Associated the default DHCP options set for your AWS account with your default VPC. Please refer to the below link for more details about the default VPC below: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/default-vpc.html Please let me know if you have any other questions or concerns and I will be happy to assist you."], "usr-2": ["Thanks a lot. Sorry to bother. Actually I am learning AWS (part timer). But now trying to move as full focused on it. I am actually trying to setup my AWS account as fresh. So I deleted all services, instances, etc which I created for test or any other live usage purpose. I am confused on Billing Dashboard - Can you help understanding ? I have cloudwatch alarms in that - but I have no alarm set and I checked all services in all regions but I have no active services as well. I want to have everything 0 (as fresh AWS) to start it as I want further. Can you guide me on this ? Can I actually remove and create new FRESH AWS account ? I dont mind if free tier usage calculated from the day I opened this account but I want all services to be very fresh. I had raised this to Billing Department on very second month of Account Start - about cloud watch alarm. But I am still with no answer about it. Edited by: msindia on Mar 9, 2017 1:40 AM Edited by: msindia on Mar 9, 2017 1:46 AM"]}, "Question": "Hello, I had deleted Default VPC for Oregon and Mumbai region in my account. I wish to have then re-setup with default AWS VPC. Can I get help on this ? Can I get default VPC re-created for my account ? Thanks, Mitesh", "Title": "Re-Create Deleted Default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=250937&tstart=0"}{"Answers": {"usr-1": ["Hello, Thank you for contacting us. I have successfully restored the Default VPC in us-west-2 region. Best regards, Karan S."], "usr-2": ["Thank you Karan for addressing this issue. It works for me now. Regards!"]}, "Question": "Dear Sir/Madam, By mistake I deleted default VPC and default Subnets from the US.West Oregon region. Could you please recreate those? I really appreciate your kind help on this. Best Regards!", "Title": "Default VPC and Subnets in Oregon", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=251124&tstart=0"}{"Answers": {"usr-1": ["Hello Askbo, The issue is with the way you have set up your security group sg-6a63b201 for the instance i-09ee26bbb989bbcfe. You are at the moment allowing traffic only from instances that are associated with the SG sg-6a63b201 and this will stop all other traffic. Please check the documentation on the below link to edit your security groups. http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Scenario3.html#VPC_Scenario3_Implementation"], "usr-2": ["Thank you very much! I don't know why I didn't see that one but I guess I was just working with for too long. The traffic is now flowing perfectly!"]}, "Question": "Hello I've established VPN tunnels to my FortiGate 100D and I can ping the tunnels, but not a test instance named i-09ee26bbb989bbcfe running in the private cloud. VPC ID: vpc-781fa710 Subnet ID: subnet-dbd2a9b3 Everything seems to be OK configuration wise, it's just that I cannot get traffic flowing between the subnets. BGP routing seems as if it's OK as well. Any idea on what could be wrong? The security groups seems open.", "Title": "No traffic to private cloud", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=251988&tstart=0"}{"Answers": {"usr-1": ["Hello LuneraSteve, I just reviewed your account and I see that you are talking about the VPC in the us-west-1 region ending with id vpc-e2f55086. The issue here is that you are launching your NAT gateways in your private subnets. What you need to do is to launch your NAT gateways in your public subnets and update the route tables of the private subnets to point to the NAT gateway. This way instances in your private subnet will be able to reach the outside world by routing traffic to your NAT gateway in your public subnet. Please note that you cannot move NAT gateways but you can only delete the existing ones and create new NAT gateways. Here is some documentation that talks about NAT gateways and how to set them up in your VPC: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-nat-gateway.html Regards Ash"], "usr-2": ["Thank you!"], "usr-3": ["Ash, I have similar NAT Gateway issue and I believe I config it right. I created one VPC with 3 public subnet,a,b,c, and 3 private subnet, a,b,c. I created one bastion host in pub subnet c and one ec2 instance in private subnet a. I can use ssh forward to the private ec2 instance thru bastion host w/o any issue. The issue is in the private ec2 I can not reach internet. I followed the troubleshoot instruction and still can't figure out what's went wrong. Is there better troubleshooting document I can follow?"]}, "Question": "I have created a VPC with a large subnet made up of 4 smaller subnets, 2 private and 2 public. The 2 public work just fine and from an instance in the public subnets I can see instances in all 4 subnets and the internet. I have created an EIP in each public subnet and a NAT gateway utilizing them complete with routing for each private subnet. Instances in private subnets are using the NAT gateway, but can not pass traffic. It appears that there is no ability to set or modify security groups for NAT gateways. How can I allow traffic to pass through the NAT Gateway?", "Title": "NAT Gateway not working under VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=251711&tstart=0"}{"Answers": {"usr-1": ["Hello, If you delete a default subnet and want to restore it, you can create a nondefault subnet and contact AWS Support[1] to mark the subnet as a default subnet. You must provide the following details: your AWS account ID, the region, and the subnet ID. I hope this help. [1] https://console.aws.amazon.com/support/home?region=us-west-2"], "usr-2": ["I saw this in previous answers but it looks like I'd need a paid support plan to go through with this. The only options available to me are Billing Support and Service Limit increases. Outside of a paid support plan, is the only alternative creating a whole new account?"], "usr-3": ["Hello, Thanks for getting back to us. Can you provide us the region, and the subnetID? Thanks, Gustavo"], "usr-4": ["Region: us-east-1 Subnet: subnet-924a2bae"], "usr-5": ["Hi Gustavo, I've stumbled on the exact same problem, so thought it would just reply to this thread. Would you do the same for me? Region: eu-west-1 Subnet: subnet-5dfba005 Thank you very much! Kind regards, Martin"], "usr-6": ["Hello, The Subnet: subnet-5dfba005 is the default subnet in the AZ. Hope this helps. Cheers, Jayakrishnan L"], "usr-7": ["I'm not sure if it was intentional since a hijacker jumped onto the thread, but you fixed his issue and left mine open. Region: us-east-1 Subnet: subnet-924a2bae At this point I'm begging for some relief here."], "usr-8": ["Hi wchatx, I apologize that we overlooked your request. I have set your subnet-924a2bae as a default subnet. I hope this helps. Cheers Ash Edited by: Ashwiniataws on Mar 24, 2017 12:38 PM"]}, "Question": "I managed to delete my default subnet. Does anyone know if it's possible yet to designation another subnet as the default? Based on the answer to the below linked forum response, it apparently can be done. https://forums.aws.amazon.com/thread.jspa?messageID=720277\uda7f\udd95 Thanks!", "Title": "Deleted default subnet", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=251283&tstart=0"}{"Answers": {"usr-1": ["I set up flowlogs and see that the traffic is actually routing properly. Seems to be the customer side firewall is blocking ping. doh!"]}, "Question": "I have a set up with 3 VPN connections to customer sites. All use the same Virtual Private Gateway with 3 different Customer Gateways. The network in AWS is 10.100.0.0/16 (using subnets of 10.100.0.0/24 and 10.100.1.0/24). 2 of the VPNs on the customer side have a single subnet while the 3rd one has 2 subnets. I can route traffic to the 2 subnets with a single subnet but the 3rd one I can only route traffic to one of the subnets. customer subnets 1. VPN connection1 - 10.200.10.0/24 (works) 2. VPN connection2 - 192.168.0.0/24 (works) 3. VPN connection3 - 10.0.10.0/24 and 192.168.1.0/24 I can only ping back and forth with 192.168/1/0/24 I have security groups with inbound rules allowing ping. I have route tables that include all of the customer subnets targeting the virtual gateway used by the VPN connections. On the customer side all of the rules are in place to allow pinging. Any ideas why 10.0.10.0/24 wouldn't work. Edited by: Bradf on Mar 30, 2017 5:42 PM", "Title": "AWS VPC VPN to customer gateway with multiple subnets", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=252703&tstart=0"}{"Answers": {"usr-1": ["I found the issue, it was due to another VPN connection having the route... I found this buy using the AWS CLI command `aws ec2 describe-vpn-connections` and saw the `Routes` section contained my invalid route."]}, "Question": "I added a VPN Connection with Static Routing and under the Static IP Prefixes I added the gateway instead of the network on the other side... Now in my Routing Table I have a Propagated Route that I cannot remove, I deleted the VPN Connection and the Customer Gateway but the route still remains. How do I delete that route?", "Title": "Invalid Propagated Route", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=247644&tstart=0"}{"Answers": {"usr-1": ["Unfortunately, not all AZs are available in each region for each account. Although you can describe for all the AZs, that does not mean that your account has access to all the AZs. You can see this from the console if you try to go and create a subnet. It will only list the available AZs for your account. So you will either need to know what AZs are available or code for this outside of cloudformation by checking and tracking if you can create something in an AZ or not."]}, "Question": "I've been having trouble for a few days with a Python tool that creates a vpc and then attempts to create a number of subnets in different AZs in it. This error has happened several times over several days and I have not been able to figure out why a particular subnet cannot be created but others can. It does create them for the other AZs (us-east-1a, us-east-1c, us-east-1b, us-east-1e). It is not reporting an overlap error and I don't think that I am hitting a resource limit so I am stuck as to the actual cause. I would appreciate any info on what is causing this and how to determine how boto can determine valid AZs in advance. The error return follows: <Response><Errors><Error><Code>InvalidParameterValue</Code><Message>Value (us-east-1d) for parameter availabilityZone is invalid. Subnets can currently only be created in the following availability zones: us-east-1a, us-east-1c, us-east-1b, us-east-1e.</Message></Error></Errors><RequestID>...-60b011b9f35d</RequestID></Response> The other subnets are created with these: 'AvailabilityZone': 'us-east-1a', 'CidrBlock': '10.0.0.0/20', 'AvailabilityZone': 'us-east-1c', 'CidrBlock': '10.0.32.0/20', 'AvailabilityZone': 'us-east-1b', 'CidrBlock': '10.0.16.0/20', 'AvailabilityZone': 'us-east-1e', 'CidrBlock': '10.0.0.0/24', If I check for what AZs should be available I get the following which does appear to show that us-east-1d is available: $ aws ec2 describe-availability-zones --region us-east-1 { 'AvailabilityZones': [ { 'State': 'available', 'RegionName': 'us-east-1', 'Messages': [], 'ZoneName': 'us-east-1a' }, { 'State': 'available', 'RegionName': 'us-east-1', 'Messages': [], 'ZoneName': 'us-east-1b' }, { 'State': 'available', 'RegionName': 'us-east-1', 'Messages': [], 'ZoneName': 'us-east-1c' }, { 'State': 'available', 'RegionName': 'us-east-1', 'Messages': [], 'ZoneName': 'us-east-1d' }, { 'State': 'available', 'RegionName': 'us-east-1', 'Messages': [], 'ZoneName': 'us-east-1e' } ] } Edited by: DougToppin on Jan 29, 2017 2:37 PM", "Title": "\"InvalidParameterValue\" error when creating subnet in us-east-1d", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=248097&tstart=0"}{"Answers": {"usr-1": ["Hi, I see you have some rules in your security group which is allowing access to only one specific ip address. Please make sure you are trying from this ip address to be able to access this particular instance. Thank you!!!"]}, "Question": "Internet Explorer says 'this page can not be displayed' I have a EC2 instance (i-0c31c90345d265a4c)", "Title": "No Internet Access from EC2 Instance", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=248233&tstart=0"}{"Answers": {"usr-1": ["Hi VAN HOLLEBEKE VINCENT, This is Craig from Amazon Web Services. I would be happy to assist. Per your request, I've created a new default VPC in the eu-west-1 region. This should now be available for any new resources you launch in this region. I hope you have a great day further. Regards, Craig"], "usr-2": ["Thanks a lot Craig"]}, "Question": "Hi everyone, Some months ago I accidentally deleted my default VPC. Now I need it for installation purposes. Can someone on this forum help me please ? I'll send needed IDs by PM. Thank you !", "Title": "Recreate default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=248355&tstart=0"}{"Answers": {"usr-1": ["Hello, Looks like your EIP was locked to your account as it had rDNS setup. I have successfully reset rDNS for 54.165.110.145, you should now be able to release your EIP. Best regards, Karan S."]}, "Question": "Hello, I don't know how this happened, but i cannot release an EIP address..I've been paying for it for nothing. 54.165.110.145 eipalloc-b614a1d3 Please help release", "Title": "Help Release Locked EIP (reverse dns issue)", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=248566&tstart=0"}{"Answers": {"usr-1": ["Hey there, thanks for posting. I looked into your architecture and noticed that you're using a VPC Endpoint along with a NAT Gateway. Unfortunately, NAT Gateway is not able to send traffic over a VPC Endpoint. See our documentation here: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpc-nat-gateway.html#nat-gateway-other-services So essentially, the fix here is to enable the VPC Endpoint for any route tables (in this case, the route table for your private subnet) which need to access S3 over it. If your instance's route table points to a NAT Gateway, which in turn points to a VPC Endpoint, this will cause the traffic to fail. Hope this clears up any confusion! Let me know if you have any further questions."], "usr-2": ["Thank you, that fixed my problem."]}, "Question": "Hi, I have a public file on s3 at https://clevercloud-aws-config.s3.amazonaws.com/splunkforwarder/inputs.conf The bucket and folder is public readable. I am trying to access this file from my EC2 instances: Instance #i-00a652ec8fab03f3a: has a private only (routes to nat-089db95020afc5300) Instance #i-026331e3c9553bcd7: has an elastic IP (routes to igw-5e52e83b) Only instance #i-00a652ec8fab03f3a fails to download my file on S3 with error: About to connect() to clevercloud-aws-config.s3.amazonaws.com port 443 (#0) Trying 52.95.133.24... Connection timed out couldn't connect to host Closing connection #0 Some other information: The bucket is not newly created. Both instances is on DHCP and resolve.conf point to the same nameserver 10.100.0.2 Both instances has SG and Network ACL on DMZ (allow all 0.0.0.0/0) This seems to happen to all hosts under whose internet connection is under nat gateway. Pls help how i can make the EC2 access the S3 file. Thanks. Edited by: RogerF on Feb 6, 2017 2:15 AM Edited by: RogerF on Feb 6, 2017 2:19 AM", "Title": "Subnet under VPC NAT cant resolve S3", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=248609&tstart=0"}{"Answers": {"usr-1": ["Hello, You are correct in your last assumption that overlapping subnets with the VPC CIDR are not usable, even if they're more specific. The following is pulled from our documentation here: http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Route_Tables.html#route-tables-priority If any propagated routes from a VPN connection or AWS Direct Connect connection overlap with the local route for your VPC, the local route is most preferred even if the propagated routes are more specific. Regards, Nick"], "usr-2": ["thanks man"]}, "Question": "i want to setup vpn tunnel between our side and aws our side: subnet 192.168.0.0/24 aws: sunbet 192.168.10.0/24 while VPC 192.168.0.0/16 the tunnel now is up. but communication between VMs doesn't work. i checked the route table on aws subnet. I enabled route progagation. the route table looks like: destionation target 192.168.0.0/16 local 192.168.0.0/24 myvirtualgateway and while i setup another tunnel our side: subnet 192.168.0.0/24 aws: sunbet 10.0.0.0/24 while VPC 10.0.0.0.0/16 the tunnel is ok and ping from each side is ok. i wonder there may be a restriction that not only address of subnet between our side and AWS can't be overlapped but also the cidr of whole VPC", "Title": "VPN tunnel issue. can't communicate from each side", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=248654&tstart=0"}{"Answers": {"usr-1": ["Hello jsd, Per your request, I've created a new default VPC in the ap-northeast-1region. This should now be available for any new resources you launch in this region. I hope this helps. Regards Shaun C"]}, "Question": "I deleted the default VPC of ap-northeast-1. Please restore default VPC.", "Title": "Please restore default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=249285&tstart=0"}{"Answers": {"usr-1": ["I heard back from aws support. the VPN service can handle 256. However the shared secret key can't be modified from what is generated during the setup. Our customer had a specific string they wanted to use, so unfortunately we had to set up a vpn using an opensource package."]}, "Question": "Hello I have set up a vpn using the wizard. When I sent the config file to be loaded on the customer gateway (not owned by us), I was asked to use different settings. The config file is for a Dell Sonic Wall. Instead of this: proposal ipsec encryption aes128 They want: proposal ipsec encryption aes256 They also requested that we use a shared secret key provided by them (not the one generated by the wizard). And they wanted a different value for the Life Time. The wizard doesn't provide any options to modify the above. And I didn't see the ability to specify it through the CLI (I may have missed it though). Is it possible to modify the above settings? Adding some additional information.....if I use the CLI and run 'aws ec2 describe-vpn-connections --vpn-connection-ids vpn-xxxxx' I can see the information for my current vpn (the one that I want to change the configuration items above. In the response to the describe-vpn-connections, there is an entry for 'CustomerGatewayConfiguration' with a lot of key/value pairs following it. (for example: <pre_shared_key>xxxxblahblahxxxx</pre_shared_key>\\n ) If I use the aws ec2 describe-customer-gateways command, I don't see any of those key/value pairs. So I'm wondering where the CustomerGatewayConfiguration properties for lifetime, encryption_protocol and pre_shared_key in the VpnConnections are configured? Are they purely defaulted? Any suggestions would be welcome. Thanks! Edited by: Unicorn on Feb 15, 2017 7:11 AM", "Title": "Changing VPN ipsec config default values?", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=249336&tstart=0"}{"Answers": {"usr-1": ["Hello, I see you have the VPN connection up currently, which is a good start. Are you still having issues passing traffic on this? From an AWS perspective this looks properly configured. Taking a look at your VPN connection I see it's up, route tables are routing traffic correctly, and security groups would allow traffic for the subnet you've specified on your VPN connection. For references regarding how to configure the Adtran, I found the following article in Adtran documentation: https://supportforums.adtran.com/docs/DOC-7727 Regards, Nick"], "usr-2": ["Hi Nick, Thanks for looking into this. Yes, I got the connection going, but I'm a little confused about something. The instructions are to set up two IPSec peers, and two tunnels, but only one tunnel seems to connect. Are there two for redundancy, or should both be connected simultaneously? Thanks, Greg"], "usr-3": ["Hello, The two tunnels are available for redundancy in case of any potential outages as well as when we may conduct any maintenance on our endpoints. We'll only ever bring down one tunnel at a time when conducting maintenance. How your device handles multiple tunnels can vary. Some devices will only have one tunnel up at a time until failure, then attempt to use the other. Other VPN devices can operate just fine with both tunnels up simultaneously. Our endpoints support either scenario. Regards, Nick"]}, "Question": "Hi all, I'm trying to configure a VPN between my office and a VPC, but have met only with failure so far. Any suggestions or specific assistance would be much appreciated, especially if anyone has configured their VPN with an Adtran device. I followed the AWS instructions for configuring the Virtual Private Gateway, the Customer Gateway, and the VPN. I downloaded the VPN configuration in generic form and used that to set up my Adtran 3448. There are two IPSEC peers defined, and two GRE tunnels to route traffic through those connections. Everything looks good on this end. I suspect there may be something missing, perhaps routing-wise, on the AWS side. Not only is the VPN not working, but I can no longer connect to my instances with RDP from the office via their public IP addresses, which I could do before the VPN was configured. This also leads me to believe this could be a routing issue. There are so many detailed settings involved, I'm not sure what would be helpful to include here. Thanks for any advice. Greg Edited by: G. Lara on Feb 17, 2017 10:43 AM", "Title": "VPN help", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=249571&tstart=0"}{"Answers": {"usr-1": ["Hi xendemic, The default VPC has been recreated for your account's us-west-2 region. Please check and get back to us if it's still missing."]}, "Question": "I accidentally deleted my default VPC a long time ago and need it recreated it back in us-west-2. How can I get this re-created if I do not have anything but", "Title": "Recreate default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=249978&tstart=0"}{"Answers": {"usr-1": ["Hi Adam, I've recreated your default-VPC in eu-west-1. Regards, Arun T."]}, "Question": "Hi, I deleted my default VPC stupidly. Could you please recreate it in eu-west-1? If you don't have my account details automatically please let me know. regards, Adam", "Title": "Please recreate my default VPC", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=250048&tstart=0"}{"Answers": {"usr-1": ["Hi terencesaw86, Your default VPC and subnets have been created in Singapore. Let me know if you experience issues. Regards."]}, "Question": "I accidentally delete my default VPC and default subnet. Can you restore my default VPC and subnet? AWS account ID : 579482953599 region : Singapore. Thanks.", "Title": "Default VPC and Default subnet", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=250396&tstart=0"}{"Answers": {"usr-1": ["vsp wrote: ... but I cannot get to EC2 with SSH at all, the connection times out. So you are connecting from the outside world using the public IP address assigned to this instance? The route table you're using would need a default route (0.0.0.0/0) pointing to the Internet Gateway in order for this to work."]}, "Question": "I'm new to VPCs in AWS and I was trying to play around with it but I'm running into some issue which I do not understand, maybe I'm doing something wrong. Here is some background what I did: - I created 2 subnets in my default VPC - one on west-2c and on west-2a regions - I named them SN1 and SN2-Secure - SN1 has this CIDR 172.31.0.0/24 - SN2-Secure has CIDR 172.31.10.0/24 - I have two routes RN1 and RN2 attached to these subnets respectively - RN1 has a Internet Gateway but RN2 does not have any gateway but just the default route: 172.31.0.0/16 local Active No - I created 2 security Groups called SG1 which allowed ports 80 and 22 and SG2 which allowed 22 - then I created 2 EC2 instances EC1 and EC2 with respective security groups SG1 and SG2 and in two separate subnets SN1 and SN2-Secure, both with external IPs. I tried reaching EC1 and I could get to it on 80 as well as SSH without issues but I cannot get to EC2 with SSH at all, the connection times out. Any suggestions would be appreciated. Internal IPs of my EC2s are: EC1- 172.31.0.101 EC2- 172.31.10.224 Edited by: vsp on Mar 2, 2017 11:05 AM", "Title": "Subnet access issue", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=250488&tstart=0"}{"Answers": {"usr-1": ["Hi mangoworks2002, You default VPCs in US regions have been created, please let me know if you experience any issues."]}, "Question": "Hello, a colleague accidentally deleted the default VPC's in our US regions. Can you restore them please? Regards, M Edited by: mangoworks2002 on Mar 5, 2017 10:27 AM", "Title": "Default VPC are deleted", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=250751&tstart=0"}{"Answers": {"usr-1": ["I was able to figure out my issue. I had to properly setup Ip Forwarding on my VPN box. sudo sysctl -w net.ipv4.ip_forward=1 The other method that I had used wasnt permanent or something."]}, "Question": "Hi, So, I all this working previously and all of a sudden have lost the ability to connect between ec2 instances within the same subnet. I am also having issues when connecting between the private and public subnets. For example, I have relaxed the permissions such that I can get on one EC2 instance in the region (a linux box) and this is what i see when running ping, telnet, and traceroute from this instance to the second instance. $ ping 10.0.0.81 PING 10.0.0.81 (10.0.0.81) 56(84) bytes of data. 64 bytes from 10.0.0.81: icmp_seq=1 ttl=128 time=0.530 ms 64 bytes from 10.0.0.81: icmp_seq=2 ttl=128 time=0.429 ms ^C 10.0.0.81 ping statistics --- 2 packets transmitted, 2 received, 0\\% packet loss, time 999ms rtt min/avg/max/mdev = 0.429/0.479/0.530/0.055 ms $ telnet 10.0.0.81 3389 Trying 10.0.0.81... Connected to 10.0.0.81. Escape character is '^]'. ^] telnet> quit Connection closed. $ traceroute 10.0.0.81 traceroute to 10.0.0.81 (10.0.0.81), 30 hops max, 60 byte packets 1 - - - 2 - - - 3 - - - 4 - - - 5 - - - 6 - - - 7 - - - 8 - - - 9 - - - 10 - - - 11 - - - 12 - - - 13 - - - 14 - - - 15 - - - 16 - - -^C $ As you can see ping and telnet proves the box is alive and should work, but traceroute does not. When I get on 10.0.0.81 with RDP, and try to ping or traceroute a private subnet instance, nothing works. doing a 'route print' doesnt even show that this windows instance has a route to 10.0.1.0 either, which could explain why it cannot connect to the private subnet instances, but this was working but has suddenly stopped. What I dont get is that this was working fine earlier today and all of a sudden it stopped working. What are my next steps here to get this working again? p.s. 10.0.0.11 is actually a VPN server that allows me to connect to these instances from my local workstation, however when connected on the VPN i am not able to ping, telnet, traceroute, or RDP to any server. The above tests were my attempt in trying to remove the VPN from the equation and just get the network working again strictly from the instances themselves. Edited by: dmiyake on Mar 6, 2017 3:05 PM Edited by: dmiyake on Mar 6, 2017 3:05 PM", "Title": "Unable to connect between 2 ec2 instances", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=250820&tstart=0"}{"Answers": {"usr-1": ["Hello Antoine, It seems to me that some of the regions in your account - 142XXXXXX66 has EC2 Classic network enabled. For those regions, you will not have a default VPC. Please go through our documentation here for more details: http://aws.amazon.com/vpc/faqs/#Default_VPCs Regards, Jayakrishnan L"], "usr-2": ["Hi Jayakrishnan, thanks a lot for you feedback. To make my request more precise, let\u00b4s take Ireland region for the account you talked about. There I\u00b4d like to have a default VPC and, as you can see, I don\u00b4t have any EC2 classic instances launched. Does that mean you could create a default VPC in this very specific region ? Best regards, Antoine"], "usr-3": ["HI, So, if you want to create a Default VPC on your existing account, you need to make your account (for region eu-west-1) 'VPC Only'. We can only enable an existing account for a default VPC if you have no EC2-Classic resources for that account in that region. Additionally, you must terminate/migrate all non-VPC provisioned EIPs, ELB, Elasticache, Redshift, RDS, EMR resources in that region. After your account has been configured for a default VPC, all future resource launches, including instances launched via Auto Scaling, will be placed in your default VPC. You will not able able to use the EC2 Classic network any more on the region. You can read more about this on our documentation http://aws.amazon.com/vpc/faqs/#Default_VPCs. To request your existing account be setup with a Default VPC, contact https://aws.amazon.com/contact-us/. We will review your request and your existing AWS services and EC2-Classic presence to determine if you are eligible for a default VPC. Regards, Jayakrishnan L."], "usr-4": ["Thanks again Jayakrishnan, I\u00b4m fine having VPC only for eu-west-1. I\u00b4d also like to have default VPC setup for this region-account but I find crazy that (if I\u00b4m not mistaken & if then let me know) I have to subscribe to a support plan to have this request done. Best regards, Antoine"], "usr-5": ["Hi again, is there a way to get the default VPC created without subscribing to a support plan ? I\u00b4m currently in a testing phase on AWS to evaluate if our next product should be hosted on an Amazon solution and if the first thing I see is that I need to get a support plan for being able to get a default configuration on my account, that\u00b4s a big downside. Best regards, Antoine"]}, "Question": "Hi everyone, I don\u00b4t have any paid support plans so I\u00b4m a bit lost in here. I\u00b4ve seen a lot of people having the same troubles than I have. I\u00b4m missing a default VPC in many of my regions and I don\u00b4t remember having deleting them neither the other persons responsible of our account. How do I get help from the support for this matter ? Best regards, Antoine", "Title": "Default VPC not existing for several regions", "awsTag": "VPC", "crawled": true, "dateScraped": "2017-04-05-21-55", "sourceUri": "https://forums.aws.amazon.com/thread.jspa?threadID=252625&tstart=0"}